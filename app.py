import os
import calendar
from PIL import Image

import pandas as pd
import streamlit as st

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Path Setup â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
BASE_DIR = os.path.dirname(os.path.abspath(__file__))
DATA_DIR = os.path.join(BASE_DIR, "data")
IMG_DIR  = os.path.join(BASE_DIR, "images")

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 1. Tru-Mi èƒ½é‡é¸å“è³‡æ–™åº« (äº”å¤§é¢å‘å£èªç‰ˆ) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# åˆ†é¡ï¼šğŸ’¼äº‹æ¥­ / ğŸ’°è²¡å¯Œ / â¤ï¸æ„Ÿæƒ… / ğŸ å®¶åº­ / ğŸ’ªå¥åº·

totem_trumi = {
    # ğŸ”´ æ±æ–¹ç´…è‰²å®¶æ—
    "ç´…é¾": {
        "aspect": "ğŸ  å®¶åº­é‹ (Family)",
        "tagline": "æˆç‚ºå®¶äººçš„é å±±ï¼Œä¹Ÿè¦è¨˜å¾—ç…§é¡§è‡ªå·±",
        "desc": "å¦³ç¸½æ˜¯æŠŠå®¶äººæ”¾åœ¨ç¬¬ä¸€ä½ï¼Œæ˜¯å®¶è£¡çš„æ”¯æŸ±ã€‚é€™æ¬¾ã€Memory æ¨¹æç³»åˆ—ã€‘å°±åƒå®¶æ—çš„æ ¹ï¼Œèƒ½å¹«å¦³ç©©ä½èƒ½é‡ï¼Œè®“å¦³åœ¨ä»˜å‡ºçš„åŒæ™‚ï¼Œä¹Ÿèƒ½æ„Ÿå—åˆ°è¢«å¤§åœ°æ¯è¦ªç©©ç©©æ¥ä½çš„å®‰å…¨æ„Ÿã€‚",
        "series": "Memory ç³»åˆ—",
        "item": "Memory æ¨¹ææ¬¾è€³ç’° / æˆ’æŒ‡",
        "url": "https://www.tru-mi.com/collections/memory"
    },
    "ç´…è›‡": {
        "aspect": "ğŸ’ª å¥åº·é‹ (Health)",
        "tagline": "èº«é«”ä¸æœƒèªªè¬Šï¼Œæ‰¾å›å¦³çš„ç”Ÿå‘½åŠ›",
        "desc": "æœ€è¿‘æ˜¯ä¸æ˜¯å¤ªç´¯äº†ï¼Ÿç´…è›‡æé†’å¦³è¦è½èº«é«”çš„è©±ã€‚é€™æ¬¾ã€Resilience æ–œç´‹ç³»åˆ—ã€‘è±¡å¾µè›»è®Šèˆ‡é‡ç”Ÿï¼Œæˆ´ä¸Šå®ƒï¼Œæé†’è‡ªå·±è©²ä¼‘æ¯å°±ä¼‘æ¯ï¼Œæ‰¾å›é‚£è‚¡ç”Ÿé¾æ´»è™çš„ç”Ÿå‘½åŠ›ï¼",
        "series": "Resilience ç³»åˆ—",
        "item": "Resilience æ–œç´‹è€³ç’°",
        "url": "https://www.tru-mi.com/collections/resilience"
    },
    "ç´…æœˆ": {
        "aspect": "â¤ï¸ æ„Ÿæƒ…é‹ (Love)",
        "tagline": "æº«æŸ”æ¥ä½æƒ…ç·’ï¼Œè®“é—œä¿‚æ›´æµå‹•",
        "desc": "å¦³æ“æœ‰ç´°è†©çš„æ„Ÿå—åŠ›ã€‚é€™æ¬¾ã€Minilife æµ·æ´‹ç³»åˆ—ã€‘çš„æ°´æ»´é€ å‹ï¼Œå°±åƒæ˜¯åœ¨å‘Šè¨´å¦³ï¼šåœ¨æ„Ÿæƒ…è£¡ï¼Œæ‰€æœ‰çš„çœ¼æ·šå’Œæ­¡ç¬‘éƒ½æ˜¯çè²´çš„ã€‚è®“æƒ…ç·’åƒæ°´ä¸€æ¨£æµå‹•ï¼Œå¦³çš„æº«æŸ”å°±æ˜¯æœ€å¼·å¤§çš„åŠ›é‡ã€‚",
        "series": "Minilife ç³»åˆ—",
        "item": "Minilife å¤¢æƒ³çš„æµ·æ´‹",
        "url": "https://www.tru-mi.com/collections/minilife"
    },
    "ç´…å¤©è¡Œè€…": {
        "aspect": "ğŸ’¼ äº‹æ¥­é‹ (Career)",
        "tagline": "åˆ¥è¢«æ¡†æ¶ç¶ä½ï¼Œå»æ¢ç´¢æ–°æ©Ÿæœƒ",
        "desc": "è¾¦å…¬å®¤é—œä¸ä½å¦³çš„å¿ƒï¼å¦³éœ€è¦çš„æ˜¯ç©ºé–“èˆ‡å†’éšªã€‚æˆ´ä¸Šã€Morning Star æ™¨æ˜Ÿç³»åˆ—ã€‘ï¼Œå®ƒå°±åƒå¤œç©ºä¸­çš„ç¾…ç›¤ï¼ŒæŒ‡å¼•å¦³åœ¨è·å ´ä¸Šå¤§è†½è·¨ç•Œï¼Œå»å˜—è©¦é‚£äº›å¦³ä¸€ç›´æƒ³åšçš„æ–°è¨ˆç•«å§ï¼",
        "series": "Morning Star ç³»åˆ—",
        "item": "æ™¨æ˜Ÿç³»åˆ—-æ˜Ÿé¡˜é …éŠ",
        "url": "https://www.tru-mi.com/collections/morning-star"
    },
    "ç´…åœ°çƒ": {
        "aspect": "ğŸ’° è²¡å¯Œé‹ (Wealth)",
        "tagline": "è·Ÿéš¨ç›´è¦ºå°èˆªï¼Œè³‡æºè‡ªç„¶æœƒä¾†",
        "desc": "å¦³ä¸éœ€è¦ç”¨åŠ›è¿½è‘—éŒ¢è·‘ï¼Œåªè¦ç©©ç©©åœ°ç´®æ ¹ï¼Œè³‡æºå°±æœƒè¢«å¦³å¸å¼•éä¾†ã€‚é€™æ¬¾ã€Memory å–®èŠ±ç³»åˆ—ã€‘è±¡å¾µå¤§è‡ªç„¶çš„è±ç››ï¼Œæˆ´ä¸Šå®ƒï¼Œæé†’è‡ªå·±é€™ä¸€æ­¥èµ°ç©©äº†ï¼Œä¸‹ä¸€æ­¥çš„è²¡å¯Œè‡ªç„¶æœƒç™¼ç”Ÿã€‚",
        "series": "Memory ç³»åˆ—",
        "item": "Memory å–®èŠ±è€³ç’° / æˆ’æŒ‡",
        "url": "https://www.tru-mi.com/collections/memory"
    },
    # âšª åŒ—æ–¹ç™½è‰²å®¶æ—
    "ç™½é¢¨": {
        "aspect": "â¤ï¸ æ„Ÿæƒ…é‹ (Love)",
        "tagline": "èªªå‡ºçœŸå¿ƒè©±ï¼Œè®“æºé€šæ²’æœ‰è·é›¢",
        "desc": "æ„Ÿæƒ…è£¡æœ€æ€•çŒœä¾†çŒœå»ã€‚ç™½é¢¨çš„å¦³ï¼Œèªªè©±å°±æ˜¯å¦³çš„é­”åŠ›ã€‚é€™æ¬¾ã€Flawless å­”ç ç³»åˆ—ã€‘é€šé€åˆåœ“æ»¿ï¼Œæˆ´ä¸Šå®ƒï¼Œè®“å¦³æ›´æœ‰å‹‡æ°£è¡¨é”çœŸå¯¦çš„æ„Ÿå—ï¼Œè®“å°æ–¹çœŸæ­£è½æ‡‚å¦³çš„å¿ƒã€‚",
        "series": "Flawless ç³»åˆ—",
        "item": "Flawless å­”ç å¥—éŠ",
        "url": "https://www.tru-mi.com/collections/flawless"
    },
    "ç™½ä¸–ç•Œæ©‹": {
        "aspect": "ğŸ’¼ äº‹æ¥­é‹ (Career)",
        "tagline": "ä½ æ˜¯æœ€å¼·çš„æ©‹æ¨‘ï¼Œé€£çµè·¨ç•Œè³‡æº",
        "desc": "å¦³å¤©ç”Ÿé©åˆç‰½ç·šã€æ•´åˆè³‡æºã€‚é€™æ¬¾ã€Tru-Mi é›™è‰²å°æˆ’/æ‹¼æ¥ç³»åˆ—ã€‘è±¡å¾µè‘—ã€Œé€£çµã€ï¼Œæé†’å¦³åœ¨è·å ´ä¸Šç™¼æ®å¦³çš„å¼·é …ï¼ŒæŠŠä¸åŒçš„äººäº‹ç‰©ä¸²è¯èµ·ä¾†ï¼Œæ©Ÿæœƒå°±åœ¨é‚£äº›é€£çµè£¡ï¼",
        "series": "å©šæˆ’/å°æˆ’ç³»åˆ—",
        "item": "Tru-Mi é›™è‰²æ‹¼æ¥æ¬¾å¼",
        "url": "https://www.tru-mi.com/wedding"
    },
    "ç™½ç‹—": {
        "aspect": "â¤ï¸ æ„Ÿæƒ…é‹ (Love)",
        "tagline": "å…ˆæ„›è‡ªå·±ï¼Œæ‰èƒ½é‡è¦‹å°çš„äºº",
        "desc": "å¦³ç¸½æ˜¯å°äººå¾ˆå¥½ï¼Œä½†åˆ¥å¿˜äº†å°è‡ªå·±å¥½ã€‚é€™æ¬¾ã€Beloved éˆ´éº/å¯µç‰©ç³»åˆ—ã€‘å……æ»¿äº†æ„›çš„èƒ½é‡ï¼Œæˆ´ä¸Šå®ƒï¼Œå…ˆå¥½å¥½å¯µæ„›è‡ªå·±ï¼Œå¦³æœƒç™¼ç¾ï¼Œç•¶å¦³ç™¼å…‰æ™‚ï¼Œèº«é‚Šçš„äººæœƒæ›´æ„›å¦³ã€‚",
        "series": "Beloved ç³»åˆ—",
        "item": "Beloved éˆ´éºçš„ç¥ç¦",
        "url": "https://www.tru-mi.com/baby-gifts-beloved"
    },
    "ç™½å·«å¸«": {
        "aspect": "ğŸ’° è²¡å¯Œé‹ (Wealth)",
        "tagline": "ç›¸ä¿¡ç›´è¦ºï¼Œé¡¯åŒ–å¦³æƒ³è¦çš„è±ç››",
        "desc": "åˆ¥æ“”å¿ƒæœªä¾†ï¼Œå¦³çš„æ„å¿µå°±æ˜¯é­”æ³•ã€‚é€™æ¬¾ã€Minilife ç§˜å¯†èŠ±åœ’ã€‘è—è‘—å¾®å°çš„é©šå–œï¼Œå°±åƒå¦³å…§åœ¨çš„é­”æ³•åŠ›é‡ã€‚åªè¦å¦³é–‰ä¸Šçœ¼ç›¸ä¿¡ï¼Œå¦³éœ€è¦çš„éŒ¢èˆ‡è³‡æºï¼Œéƒ½æœƒåœ¨å°çš„æ™‚é–“ä¾†åˆ°å¦³èº«é‚Šã€‚",
        "series": "Minilife ç³»åˆ—",
        "item": "Minilife ç§˜å¯†èŠ±åœ’",
        "url": "https://www.tru-mi.com/collections/minilife"
    },
    "ç™½é¡": {
        "aspect": "ğŸ’¼ äº‹æ¥­é‹ (Career)",
        "tagline": "çœ‹æ¸…çœŸç›¸ï¼Œåšå‡ºæœ€ç²¾æº–çš„æ±ºç­–",
        "desc": "è·å ´ä¸Šç´›ç´›æ“¾æ“¾ï¼Œä½†å¦³å¿ƒè£¡è·Ÿæ˜é¡ä¸€æ¨£æ¸…æ¥šã€‚é€™æ¬¾ã€Flawless æ»¾ç éŠ€æˆ’ã€‘ç¶“éç²¾ç´°æ‹‹å…‰ï¼Œå°±åƒä¸€é¢é¡å­ã€‚æˆ´ä¸Šå®ƒï¼Œå¹«å¦³æ“‹æ‰è™›å‡çš„äººäº‹ç‰©ï¼Œè®“å¦³åœ¨åšæ±ºç­–æ™‚å¿«ã€ç‹ ã€æº–ã€‚",
        "series": "Flawless ç³»åˆ—",
        "item": "Flawless æ»¾ç éŠ€æˆ’ (äº®é¢)",
        "url": "https://www.tru-mi.com/collections/flawless"
    },
    # ğŸ”µ è¥¿æ–¹è—è‰²å®¶æ—
    "è—å¤œ": {
        "aspect": "ğŸ’° è²¡å¯Œé‹ (Wealth)",
        "tagline": "å¦³çš„å¤¢æƒ³å¾ˆå€¼éŒ¢ï¼ŒæŠŠç›´è¦ºè®Šç¾é‡‘",
        "desc": "å¦³æ˜¯å¤©ç”Ÿçš„å¤¢æƒ³å®¶ï¼Œè€Œä¸”å¦³æœ‰èƒ½åŠ›æŠŠå¤¢æƒ³è®ŠæˆéŒ¢ï¼é€™æ¬¾ã€Morning Star æ˜Ÿé¡˜é …éŠã€‘å®ˆè­·è‘—å¦³å…§å¿ƒçš„è±ç››è—åœ–ã€‚åˆ¥å®³æ€•åšå¤§å¤¢ï¼Œæˆ´ä¸Šé€™é¡†æ˜Ÿæ˜Ÿï¼Œå®ƒæœƒæŒ‡å¼•å¦³æ‰¾åˆ°é€šå¾€è²¡å¯Œçš„è·¯ã€‚",
        "series": "Morning Star ç³»åˆ—",
        "item": "æ™¨æ˜Ÿç³»åˆ—-æ˜Ÿé¡˜é …éŠ",
        "url": "https://www.tru-mi.com/collections/morning-star"
    },
    "è—æ‰‹": {
        "aspect": "ğŸ’¼ äº‹æ¥­é‹ (Career)",
        "tagline": "åˆ¥æƒ³äº†åšå°±å°äº†ï¼Œå¯¦ä½œå¸¶ä¾†å¥½é‹",
        "desc": "æƒ³å¤ªå¤šæœƒè®“å¦³å¡ä½ï¼Œå‹•æ‰‹åšæ‰æœƒå¸¶ä¾†å¥½é‹ï¼æ¨è–¦å¦³ã€å°ˆå±¬è¨‚è£½ / æ‰‹ä½œé«”é©—ã€‘ï¼Œè¦ªæ‰‹åƒèˆ‡è¨­è¨ˆæˆ–è£½ä½œã€‚çœ‹è‘—æˆå“åœ¨å¦³æ‰‹ä¸­å®Œæˆï¼Œé‚£ç¨®æˆå°±æ„Ÿæœƒæ˜¯å¦³äº‹æ¥­è¡åˆºçš„æœ€å¤§å‹•èƒ½ã€‚",
        "series": "å°ˆå±¬è¨‚è£½",
        "item": "Tru-Mi æ•…äº‹è¨‚è£½ / æ‰‹ä½œé«”é©—",
        "url": "https://www.tru-mi.com/custom-jewelry"
    },
    "è—çŒ´": {
        "aspect": "ğŸ’ª å¥åº·é‹ (Health)",
        "tagline": "ç”Ÿæ´»å¤ªç·Šç¹ƒäº†å—ï¼Ÿè¨˜å¾—ç©æ¨‚èˆ‡å¤§ç¬‘",
        "desc": "å¦³æœ€è¿‘æ˜¯ä¸æ˜¯å¤ªåš´è‚…äº†ï¼Ÿå£“åŠ›æœƒè®“èº«é«”ç”Ÿç—…çš„ã€‚é€™æ¬¾ã€Beloved æ–æ–é¦¬/å…”æ‰‹éŠã€‘å……æ»¿ç«¥å¿ƒï¼Œæˆ´ä¸Šå®ƒï¼Œæé†’è‡ªå·±åƒå­©å­ä¸€æ¨£å¤§ç¬‘ã€ç©æ¨‚ã€‚å¿ƒæƒ…é¬†äº†ï¼Œèº«é«”è‡ªç„¶å°±å¥åº·äº†ï¼",
        "series": "Beloved ç³»åˆ—",
        "item": "Beloved æ–æ–é¦¬/å…”æ‰‹éŠ",
        "url": "https://www.tru-mi.com/baby-gifts-beloved"
    },
    "è—é·¹": {
        "aspect": "ğŸ’¼ äº‹æ¥­é‹ (Career)",
        "tagline": "é£›é«˜ä¸€é»çœ‹ï¼Œå¦³çš„æ ¼å±€æ±ºå®šçµå±€",
        "desc": "åˆ¥è¢«çœ¼å‰çš„å°äº‹çµ†ä½ï¼Œå¦³æ˜¯å±¬æ–¼å¤§å ´é¢çš„ã€‚é€™æ¬¾ã€Resilience é ˜å¸¶ç³»åˆ—ã€‘è±¡å¾µè‘—å°ˆæ¥­èˆ‡è¦–é‡ï¼Œæˆ´ä¸Šå®ƒï¼Œæé†’è‡ªå·±ç”¨è€é·¹çš„é«˜åº¦çœ‹äº‹æƒ…ï¼Œå¦³æœƒç™¼ç¾åŸæœ¬çš„é›£é¡Œæ ¹æœ¬ä¸ç®—ä»€éº¼ã€‚",
        "series": "Resilience ç³»åˆ—",
        "item": "Resilience é ˜å¸¶è€³ç’°/é …éŠ",
        "url": "https://www.tru-mi.com/collections/resilience"
    },
    "è—é¢¨æš´": {
        "aspect": "ğŸ’¼ äº‹æ¥­é‹ (Career)",
        "tagline": "æ“æŠ±è®Šå‹•ï¼Œå¦³æ˜¯æ··äº‚ä¸­çš„ç ´å±€è€…",
        "desc": "ç’°å¢ƒåœ¨è®Šï¼Œé‚£æ˜¯å› ç‚ºå¦³è¦èµ·é£›äº†ï¼åˆ¥æ€•æ··äº‚ï¼Œé€™æ¬¾ã€Minilife æµ·æ´‹æ³¢æµªæ¬¾ã€‘è±¡å¾µè‘—å¼·å¤§çš„è½‰åŒ–èƒ½é‡ã€‚æˆ´ä¸Šå®ƒï¼ŒæŠŠæ‰€æœ‰çš„æŒ‘æˆ°éƒ½è®Šæˆå¦³äº‹æ¥­å‡ç´šçš„è·³æ¿ã€‚",
        "series": "Minilife ç³»åˆ—",
        "item": "Minilife å¤¢æƒ³çš„æµ·æ´‹ (æ³¢æµª)",
        "url": "https://www.tru-mi.com/collections/minilife"
    },
    # ğŸŸ¡ å—æ–¹é»ƒè‰²å®¶æ—
    "é»ƒç¨®å­": {
        "aspect": "ğŸ’° è²¡å¯Œé‹ (Wealth)",
        "tagline": "è€å¿ƒæ’­ç¨®ï¼Œæ™‚é–“æœƒçµ¦å¦³æœ€è±åšçš„å›å ±",
        "desc": "è²¡å¯Œæ˜¯æ€¥ä¸ä¾†çš„ï¼Œå¦³ç¾åœ¨åšçš„æ¯ä¸€åˆ†åŠªåŠ›éƒ½åœ¨ç´¯ç©ã€‚é€™æ¬¾ã€Memory èŠ±æœµç³»åˆ—ã€‘è±¡å¾µé–‹èŠ±çµæœã€‚æˆ´ä¸Šå®ƒï¼Œæé†’è‡ªå·±ä¿æŒè€å¿ƒï¼Œå¦³ç¨®ä¸‹çš„éŒ¢è„ˆç¨®å­ï¼Œçµ‚ç©¶æœƒé•·æˆå¤§æ¨¹ã€‚",
        "series": "Memory ç³»åˆ—",
        "item": "Memory å–®èŠ±è€³ç’°",
        "url": "https://www.tru-mi.com/collections/memory"
    },
    "é»ƒæ˜Ÿæ˜Ÿ": {
        "aspect": "â¤ï¸ æ„Ÿæƒ…é‹ (Love)",
        "tagline": "æ´»å¾—æ¼‚äº®å„ªé›…ï¼Œè®“è‡ªå·±æˆç‚ºç™¼å…‰é«”",
        "desc": "å¦³å¤©ç”Ÿå°±è©²é–ƒé–ƒç™¼å…‰ï¼ä¸è¦å› ç‚ºå¿™ç¢Œè€Œè®Šå¾—é»¯æ·¡ã€‚é€™æ¬¾ã€Morning Star æ˜Ÿé‘½ç³»åˆ—ã€‘èƒ½è¥¯æ‰˜å¦³çš„æ°£è³ªã€‚ç•¶å¦³æŠŠè‡ªå·±æ‰“æ‰®å¾—æ¼‚äº®å„ªé›…æ™‚ï¼Œæ„›æƒ…èˆ‡å¥½äººç·£è‡ªç„¶æœƒè¢«å¦³å¸å¼•éä¾†ã€‚",
        "series": "Morning Star ç³»åˆ—",
        "item": "æ™¨æ˜Ÿç³»åˆ— (æ˜Ÿé‘½æ¬¾)",
        "url": "https://www.tru-mi.com/collections/morning-star"
    },
    "é»ƒäºº": {
        "aspect": "ğŸ’¼ äº‹æ¥­é‹ (Career)",
        "tagline": "ç›¸ä¿¡å¦³çš„æ™ºæ…§ï¼Œæ‹¿å›äººç”Ÿçš„é¸æ“‡æ¬Š",
        "desc": "å¦³å¾ˆè°æ˜ï¼Œåˆ¥è®“åˆ¥äººå·¦å³å¦³çš„æ±ºå®šã€‚é€™æ¬¾ã€Mi åˆ»å­—ç³»åˆ—ã€‘å¯ä»¥åˆ»ä¸Šå¦³çš„ä¿¡å¿µæˆ–æ ¼è¨€ã€‚æˆ´ä¸Šå®ƒï¼Œæ™‚åˆ»æé†’è‡ªå·±ï¼šæˆ‘æœ‰èƒ½åŠ›åšå‡ºæœ€æ­£ç¢ºçš„é¸æ“‡ï¼Œæˆ‘çš„æœªä¾†æˆ‘èªªäº†ç®—ã€‚",
        "series": "Mi ç³»åˆ—",
        "item": "Mi å‘Šç™½é …éŠ (åˆ»å­—è¨‚è£½)",
        "url": "https://www.tru-mi.com/collections/mi"
    },
    "é»ƒæˆ°å£«": {
        "aspect": "ğŸ’¼ äº‹æ¥­é‹ (Career)",
        "tagline": "ç„¡æ‰€ç•æ‡¼ï¼Œå¦³æ˜¯è§£æ±ºå•é¡Œçš„é«˜æ‰‹",
        "desc": "é‡åˆ°å›°é›£åˆ¥é€€ç¸®ï¼Œé‚£æ˜¯å®‡å®™çµ¦å¦³çš„éš¨å ‚è€ƒã€‚é€™æ¬¾ã€Resilience å¹¾ä½•é€ å‹ã€‘å°±åƒå¦³çš„éš±å½¢ç›¾ç‰Œèˆ‡é§ç”²ã€‚æˆ´ä¸Šå®ƒï¼Œçµ¦å¦³æ»¿æ»¿çš„å‹‡æ°£ï¼Œè·å ´ä¸Šæ²’æœ‰å¦³è§£æ±ºä¸äº†çš„é›£é¡Œï¼",
        "series": "Resilience ç³»åˆ—",
        "item": "Resilience å¹¾ä½•é€ å‹æˆ’",
        "url": "https://www.tru-mi.com/collections/resilience"
    },
    "é»ƒå¤ªé™½": {
        "aspect": "ğŸ’° è²¡å¯Œé‹ (Wealth)",
        "tagline": "å¦³å°±æ˜¯å…‰ï¼Œåˆ†äº«è¶Šå¤šè²¡å¯Œè¶Šå¤š",
        "desc": "å¦³æœ‰ä¸€ç¨®æº«æš–çš„é ˜è¢–æ°£è³ªï¼Œä¸éœ€è¦ç«¶çˆ­ï¼Œåªéœ€ç…§è€€ä»–äººã€‚é€™æ¬¾ã€é‡‘è‰²ç³»æ™¨æ˜Ÿ/Ké‡‘é£¾å“ã€‘è±¡å¾µå¤ªé™½çš„èƒ½é‡ã€‚æˆ´ä¸Šå®ƒï¼Œå¤§æ–¹å±•ç¾å¦³çš„ç†±æƒ…ï¼Œå¦³çµ¦äºˆå‡ºå»çš„ï¼Œéƒ½æœƒä»¥é‡‘éŒ¢çš„å½¢å¼åŠ å€æµå›ä¾†ã€‚",
        "series": "Morning Star / å©šæˆ’ç³»åˆ—",
        "item": "æ™¨æ˜Ÿç³»åˆ— (é‡‘è‰²æ¬¾) / Ké‡‘æˆ’æŒ‡",
        "url": "https://www.tru-mi.com/collections/morning-star"
    }
}

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 2. Tone Advice (13èª¿æ€§-å£èªç‰ˆå»ºè­°) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
tone_advice = {
    1:  {"name": "ç£æ€§", "tip": "ã€å°ˆæ³¨è‡ªå·±ã€‘ä»Šå¤©åˆ¥ç®¡åˆ¥äººæ€éº¼æƒ³ï¼Œå•å•è‡ªå·±ã€Œæˆ‘æœ€æƒ³è¦ä»€éº¼ï¼Ÿã€æˆ´ä¸Šä¸€æ¢æœ€èƒ½ä»£è¡¨å¦³çš„é …éŠï¼Œåšå›ä¸»è§’ã€‚"},
    2:  {"name": "æœˆäº®", "tip": "ã€å¹³è¡¡é¸æ“‡ã€‘é‡åˆ°å·¦å³ç‚ºé›£çš„äº‹å—ï¼Ÿåˆ¥æ€¥è‘—é¸é‚Šç«™ã€‚æˆ´ä¸Šå°ç¨±çš„è€³ç’°æˆ–å°æˆ’ï¼Œæé†’è‡ªå·±ï¼šå…©å€‹é¸æ“‡éƒ½æœ‰å¥½è™•ï¼Œä¿æŒå½ˆæ€§å°±å¥½ã€‚"},
    3:  {"name": "é›»åŠ›", "tip": "ã€é€£çµæœ‹å‹ã€‘ä»Šå¤©é©åˆç´„äººå‡ºä¾†èŠèŠï¼æˆ´ä¸Šæœƒæ™ƒå‹•çš„å‚å¢œè€³ç’°ï¼Œè®“è‡ªå·±å‹•èµ·ä¾†ï¼Œå¥½é‹æ˜¯é€éã€Œäººèˆ‡äººçš„é€£çµã€å¸¶ä¾†çš„å–”ï¼"},
    4:  {"name": "è‡ªæˆ‘å­˜åœ¨", "tip": "ã€å»ºç«‹SOPã€‘äº‹æƒ…å¤ªé›œäº‚ï¼Ÿåˆ—å¼µæ¸…å–®ï¼Œä¸€æ­¥ä¸€æ­¥ä¾†ã€‚æˆ´ä¸Šæ–¹å½¢æˆ–æœ‰æ¡†ç·šçš„é£¾å“ï¼Œå¹«å¦³å»ºç«‹ç§©åºï¼Œå¿ƒå®šä¸‹ä¾†ï¼Œæ•ˆç‡å°±ä¾†äº†ã€‚"},
    5:  {"name": "è¶…é »", "tip": "ã€å±•ç¾éœ¸æ°£ã€‘ä»Šå¤©ç”±å¦³èªªäº†ç®—ï¼ä¸è¦ç¸®åœ¨è§’è½ã€‚æˆ´ä¸Šå¦³æœ€å¤§ã€æœ€äº®çœ¼çš„é‚£é¡†æˆ’æŒ‡ï¼Œç«™ä¸Šèˆå°ï¼Œå¤§å®¶éƒ½åœ¨ç­‰å¦³ç™¼è™Ÿæ–½ä»¤ã€‚"},
    6:  {"name": "éŸ»å¾‹", "tip": "ã€æ‰¾å›ç¯€å¥ã€‘å¿™å¾—åƒé™€èºå—ï¼Ÿæ·±å‘¼å¸ï¼Œæ…¢ä¸‹ä¾†ã€‚é¸æ“‡ä½©æˆ´æ„Ÿæœ€èˆ’æœã€åœ“æ½¤çš„é£¾å“ï¼Œå¹«å¦³æ‰¾å›ç”Ÿæ´»èˆ‡å·¥ä½œçš„å¹³è¡¡é»ã€‚"},
    7:  {"name": "å…±æŒ¯", "tip": "ã€è·Ÿéš¨ç›´è¦ºã€‘ä»Šå¤©è…¦è¢‹æ”¾ç©ºä¸€é»ï¼Œè·Ÿè‘—æ„Ÿè¦ºèµ°ã€‚é–‰ä¸Šçœ¼æ‘¸æ‘¸èº«ä¸Šçš„é£¾å“ï¼Œå®ƒæœƒè®Šæˆå¦³çš„å¤©ç·šï¼Œå¹«å¦³æ¥æ”¶å®‡å®™çš„éˆæ„Ÿã€‚"},
    8:  {"name": "éŠ€æ²³", "tip": "ã€è¨€è¡Œä¸€è‡´ã€‘æª¢è¦–ä¸€ä¸‹ï¼Œå¦³åšçš„äº‹æ˜¯å¦³çœŸå¿ƒå–œæ­¡çš„å—ï¼Ÿå˜—è©¦æˆå¥—æ­é…é£¾å“ï¼Œè®“å…§åœ¨çš„æƒ³æ³•å’Œå¤–åœ¨çš„è¡Œå‹•ã€Œæ•´åˆã€åœ¨ä¸€èµ·ã€‚"},
    9:  {"name": "å¤ªé™½", "tip": "ã€è¡åˆºè¡Œå‹•ã€‘åˆ¥çŒ¶è±«äº†ï¼Œåšå°±å°äº†ï¼ä»Šå¤©èƒ½é‡å¾ˆå¼·ï¼Œæˆ´ä¸Šé–ƒäº®çš„é£¾å“ï¼ŒæŠŠæƒ³åšçš„äº‹æƒ…ä¸€å£æ°£æ¨é€²ï¼Œæˆæœæœƒè¶…ä¹é æœŸã€‚"},
    10: {"name": "è¡Œæ˜Ÿ", "tip": "ã€å®Œç¾æ”¶å°¾ã€‘ä»Šå¤©æ˜¯é©—æ”¶æˆæœçš„æ—¥å­ã€‚æŒ‘é¸åšå·¥æœ€ç²¾ç·»çš„é‚£ä»¶é£¾å“ï¼Œå°ˆæ³¨æŠŠæ‰‹é‚Šçš„äº‹æƒ…åšåˆ°å®Œç¾ï¼Œäº«å—é‚£ç¨®ã€Œæå®šï¼ã€çš„æˆå°±æ„Ÿã€‚"},
    11: {"name": "å…‰è­œ", "tip": "ã€æ–·æ¨é›¢ã€‘å¿ƒè£¡åƒåœ¾å¤ªå¤šï¼Ÿé‚„æ˜¯å®¶è£¡å¤ªäº‚ï¼Ÿä»Šå¤©é©åˆå¤§æƒé™¤ã€‚æˆ´ä¸Šç°¡å–®ã€ç”šè‡³ä¸è¦å‰‡è¨­è¨ˆçš„é£¾å“ï¼Œé‡‹æ”¾æ‰é‚£äº›ä¸å†é©åˆå¦³çš„äººäº‹ç‰©ã€‚"},
    12: {"name": "æ°´æ™¶", "tip": "ã€åœ˜é«”åˆä½œã€‘ä¸€å€‹äººèµ°å¾—å¿«ï¼Œä¸€ç¾¤äººèµ°å¾—é ã€‚ä»Šå¤©é©åˆé–‹æœƒæˆ–èšé¤ã€‚æˆ´ä¸Šåœ“æ½¤çš„çç æˆ–åœ“ç é£¾å“ï¼Œç•¶é‚£å€‹å‡èšå¤§å®¶çš„æº«æš–è§’è‰²ã€‚"},
    13: {"name": "å®‡å®™", "tip": "ã€æ”¾ç©ºä¼‘æ¯ã€‘è¾›è‹¦äº†ï¼ä»Šå¤©é©åˆæ…¶ç¥å’Œæ”¾é¬†ã€‚æˆ´ä¸Šæœ€ç°¡ç´„ã€ç”šè‡³ç•™ç™½çš„é£¾å“ï¼Œå‘Šè¨´è‡ªå·±ï¼šæˆ‘å·²ç¶“åšå¾—å¾ˆå¥½äº†ï¼Œç¾åœ¨æˆ‘è¦å¥½å¥½äº«å—ç•¶ä¸‹ã€‚"}
}

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Page Config & CSS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
st.set_page_config(page_title="Tru-Mi èƒ½é‡é¸ç‰©", layout="wide", page_icon="ğŸ’")
st.markdown(
    """<style>
    .hero {padding:3rem 2rem; text-align:center; background: linear-gradient(135deg, #fdfbfb 0%, #ebedee 100%); border-radius: 15px; margin-bottom: 2rem;}
    .hero h1 {font-size:2.5rem; font-weight:700; color: #333; margin-bottom:0.5rem; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;}
    .hero p  {font-size:1.1rem; color: #666;}
    
    .footer {position:fixed; bottom:0; width:100%; background:#333; color:white; text-align:center; padding:1rem; z-index:999;}
    .footer a {color:#F8BBD0; text-decoration:none; margin:0 0.5rem;}
    
    div[data-testid="stContainer"] {
        background-color: #ffffff;
        border-radius: 12px;
        padding: 20px;
        box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        border: 1px solid #f5f5f5;
    }
    
    /* æ¨™ç±¤æ¨£å¼ */
    .aspect-tag {
        display: inline-block;
        padding: 5px 15px;
        border-radius: 20px;
        font-weight: bold;
        color: white;
        margin-bottom: 10px;
        font-size: 0.9rem;
    }
    .tag-career { background-color: #4A90E2; } /* è—è‰²-äº‹æ¥­ */
    .tag-wealth { background-color: #F5A623; } /* é‡‘è‰²-è²¡å¯Œ */
    .tag-love { background-color: #E06C75; }   /* ç²‰è‰²-æ„Ÿæƒ… */
    .tag-family { background-color: #50E3C2; color: #333; } /* ç¶ è‰²-å®¶åº­ */
    .tag-health { background-color: #BD10E0; } /* ç´«è‰²-å¥åº· */
    
    .btn-trumi {
        display: inline-block;
        padding: 12px 24px;
        background-color: #D4AF37;
        color: white !important;
        text-decoration: none;
        border-radius: 30px;
        font-weight: bold;
        margin-top: 15px;
        text-align: center;
        width: 100%;
        transition: all 0.3s ease;
        box-shadow: 0 4px 6px rgba(212, 175, 55, 0.3);
    }
    .btn-trumi:hover {
        background-color: #B59025;
        transform: translateY(-2px);
    }
    </style>""",
    unsafe_allow_html=True,
)

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Hero Section â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
st.markdown(
    """
    <section class="hero">
      <h1>ğŸ’ Tru-Mi èƒ½é‡é¸ç‰©é™ªä¼´å®¤</h1>
      <p>ä¸åªæ˜¯é£¾å“ï¼Œæ›´æ˜¯å¦³ç•¶ä¸‹æœ€éœ€è¦çš„èƒ½é‡è£œçµ¦ã€‚<br>è¼¸å…¥ç”Ÿæ—¥ï¼Œçœ‹çœ‹å®‡å®™æƒ³é€çµ¦å¦³ä»€éº¼ç¦®ç‰©ï¼Ÿ</p>
    </section>
    """,
    unsafe_allow_html=True,
)

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Load Data â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
try:
    kin_start   = pd.read_csv(os.path.join(DATA_DIR, "kin_start_year.csv"), index_col="å¹´ä»½")["èµ·å§‹KIN"].to_dict()
    month_accum = pd.read_csv(os.path.join(DATA_DIR, "month_day_accum.csv"),   index_col="æœˆä»½")["ç´¯ç©å¤©æ•¸"].to_dict()
    kin_basic   = pd.read_csv(os.path.join(DATA_DIR, "kin_basic_info.csv"))
except Exception as e:
    st.error(f"âŒ è³‡æ–™è¼‰å…¥å¤±æ•—ï¼š{e}")
    st.stop()

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Sidebar Input â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
st.sidebar.header("ğŸ“… é ˜å–å¦³çš„å°ˆå±¬èƒ½é‡")
year = st.sidebar.selectbox("å‡ºç”Ÿå¹´ä»½ (è¥¿å…ƒ)", sorted(kin_start.keys()), index=sorted(kin_start.keys()).index(1990))
month = st.sidebar.selectbox("å‡ºç”Ÿæœˆä»½", list(range(1,13)), index=0)
max_day = calendar.monthrange(year, month)[1]
day = st.sidebar.slider("å‡ºç”Ÿæ—¥æœŸ", 1, max_day, 1)

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ KIN & Tone Calculation â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
start_kin = kin_start.get(year)
if start_kin is None:
    st.sidebar.error("âš ï¸ æ­¤å¹´ä»½ç„¡èµ·å§‹ KIN")
    st.stop()

raw = start_kin + month_accum.get(month,0) + day
mod = raw % 260
kin = 260 if mod==0 else mod

tone_number = kin % 13
if tone_number == 0:
    tone_number = 13

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ é¡¯ç¤ºåŸºæœ¬è³‡è¨Š â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
subset = kin_basic[kin_basic["KIN"]==kin]
if subset.empty:
    st.error(f"â“ æ‰¾ä¸åˆ° KIN {kin} è³‡æ–™")
    st.stop()
info = subset.iloc[0]
totem = info["åœ–é¨°"]

# Get Data
rec = totem_trumi.get(totem, {})
tone_rec = tone_advice.get(tone_number, {})

# Determine Tag Class based on Aspect
aspect_class = "tag-career"
if "è²¡å¯Œ" in rec.get('aspect', ''): aspect_class = "tag-wealth"
elif "æ„Ÿæƒ…" in rec.get('aspect', ''): aspect_class = "tag-love"
elif "å®¶åº­" in rec.get('aspect', ''): aspect_class = "tag-family"
elif "å¥åº·" in rec.get('aspect', ''): aspect_class = "tag-health"

st.markdown(f"### ğŸ”® å¦³çš„éˆé­‚å°è¨˜ï¼š{kin} {totem} (èª¿æ€§ {tone_number})")

col_img, col_info = st.columns([1, 4])
with col_img:
    img_file = os.path.join(IMG_DIR, f"{totem}.png")
    if os.path.exists(img_file):
        st.image(Image.open(img_file), use_container_width=True)

with col_info:
    if rec:
        # é¡¯ç¤ºé¢å‘æ¨™ç±¤
        st.markdown(f'<span class="aspect-tag {aspect_class}">{rec["aspect"]}</span>', unsafe_allow_html=True)
        
        # é¡¯ç¤º Slogan
        st.markdown(f"### {rec['tagline']}")
        
        # é¡¯ç¤ºå£èªåŒ–æè¿°
        st.write(rec['desc'])
    else:
        st.warning("ç›®å‰å°šç„¡æ­¤åœ–é¨°å°æ‡‰è³‡æ–™")

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ é¸å“é¡§å•ä¸»å€å¡Š â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
st.divider()

col1, col2 = st.columns(2)

# å·¦æ¬„ï¼šTru-Mi å‘½å®šå–®å“
with col1:
    st.markdown("#### ğŸ’ å¦³çš„å‘½å®šé£¾å“ (Destiny Item)")
    st.caption("é€™æ¬¾é£¾å“ï¼Œèƒ½æ”¾å¤§å¦³çš„å¤©è³¦èƒ½é‡")
    
    if rec:
        with st.container(border=True):
            st.markdown(f"**âœ¨ æ¨è–¦ç³»åˆ—ï¼š{rec['series']}**")
            st.markdown(f"**ğŸ’ å¿…æ”¶å–®å“ï¼š{rec['item']}**")
            
            st.info("ğŸ’¡ **ç‚ºä»€éº¼é©åˆå¦³ï¼Ÿ**\nå› ç‚ºå¦³å€¼å¾—æ“æœ‰ä¸€å€‹ã€Œæ‡‚å¦³ã€çš„é£¾å“ï¼Œæ™‚åˆ»é™ªä¼´å¦³ã€æ”¯æŒå¦³ã€‚")
            
            # å°è³¼æŒ‰éˆ•
            btn_text = "å‰å¾€å®˜ç¶²ï¼ŒæŠŠå®ƒå¸¶å›å®¶ ğŸ‘‰"
            if "è¨‚è£½" in rec['series']:
                btn_text = "é ç´„å°ˆå±¬è¨‚è£½é«”é©— ğŸ‘‰"
            st.markdown(f'<a href="{rec["url"]}" target="_blank" class="btn-trumi">{btn_text}</a>', unsafe_allow_html=True)

# å³æ¬„ï¼šèƒ½é‡ä½¿ç”¨èªªæ˜æ›¸ (èª¿æ€§)
with col2:
    st.markdown("#### ğŸµ èƒ½é‡ä½¿ç”¨å°æ’‡æ­¥ (Energy Tips)")
    st.caption("æœ‰äº†é£¾å“ï¼Œè©²æ€éº¼ç”¨æœ€æœ‰æ•ˆï¼Ÿ")
    
    if tone_rec:
        with st.container(border=True):
            st.markdown(f"**âœ¨ å¦³çš„èª¿æ€§ï¼š{tone_rec['name']}**")
            st.write(tone_rec['tip'])
            
            st.success("ğŸŒŸ **è©¦è©¦çœ‹**ï¼šä¸‹æ¬¡æˆ´ä¸Šé£¾å“æ™‚ï¼Œåœ¨å¿ƒè£¡é»˜å”¸é€™å€‹å°æ’‡æ­¥ï¼Œæ„Ÿè¦ºä¸€ä¸‹æœ‰æ²’æœ‰ä»€éº¼ä¸åŒï¼Ÿ")

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ èƒ½é‡å•Ÿå‹•å„€å¼ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
with st.expander("ğŸ•¯ï¸ æ”¶åˆ°é£¾å“å¾Œè©²åšä»€éº¼ï¼Ÿ(3åˆ†é˜é–‹å…‰å„€å¼)"):
    st.markdown(
        """
        <div style="background-color: #fafafa; padding: 20px; border-left: 5px solid #D4AF37; border-radius: 5px;">
        <p>è¦ªæ„›çš„ï¼Œç•¶å¿«éæŠŠ Tru-Mi çš„ç›’å­é€åˆ°å¦³æ‰‹ä¸Šæ™‚ï¼Œè«‹çµ¦è‡ªå·± 3 åˆ†é˜çš„ç¨è™•æ™‚é–“ï¼š</p>
        
        <ol style="line-height: 1.8;">
            <li><strong>æ­¸é›¶ï¼š</strong>æŠŠé£¾å“æ¡åœ¨æ‰‹å¿ƒï¼Œæ·±å‘¼å¸ï¼Œæƒ³åƒç™½å…‰æŠŠé‹é€éç¨‹çš„é›œæ°£éƒ½æ´—æ‰ã€‚</li>
            <li><strong>é€£çµï¼š</strong>æŠŠé£¾å“è²¼åœ¨èƒ¸å£ï¼Œæ„Ÿå—å®ƒçš„æº«åº¦ï¼Œåœ¨å¿ƒè£¡å°å®ƒèªªï¼šã€Œå—¨ï¼Œä»¥å¾Œè«‹å¤šæŒ‡æ•™ã€‚ã€</li>
            <li><strong>è¨±é¡˜ï¼š</strong>å°è‘—é£¾å“èªªå‡ºå¦³ç¾åœ¨æœ€éœ€è¦çš„åŠ›é‡ï¼ˆä¾‹å¦‚ï¼š<strong>è«‹çµ¦æˆ‘å‹‡æ°£/è«‹è®“æˆ‘è³ºå¤§éŒ¢</strong>ï¼‰ã€‚</li>
            <li><strong>å°å­˜ï¼š</strong>æœ€å¾Œï¼Œå°å®ƒè¼•è¼•å¹ä¸€å£æ°£ã€‚å¥½äº†ï¼ç¾åœ¨å®ƒæ˜¯å¦³å°ˆå±¬çš„è­·èº«ç¬¦äº†ã€‚</li>
        </ol>
        </div>
        """, 
        unsafe_allow_html=True
    )

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ å›ºå®š Footer â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
st.markdown(
    """
    <div style="margin-bottom: 80px;"></div>
    <footer class="footer">
      <p>Designed for Tru-Mi Jewelry | å¦³çš„èƒ½é‡ï¼Œæˆ‘å€‘åœ¨ä¹</p>
      <a href="https://www.tru-mi.com/" target="_blank">ğŸ‘‰ Tru-Mi å®˜ç¶²</a> 
      <a href="https://www.facebook.com/trumi.jewelry/" target="_blank">ğŸ‘‰ FB ç²‰çµ²é </a>
    </footer>
    """,
    unsafe_allow_html=True
)
