import os
import calendar
from PIL import Image

import pandas as pd
import streamlit as st

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Path Setup â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
BASE_DIR = os.path.dirname(os.path.abspath(__file__))
DATA_DIR = os.path.join(BASE_DIR, "data")
IMG_DIR  = os.path.join(BASE_DIR, "images")

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 1. General Jewelry Data (é€šç”¨èƒ½é‡å»ºè­° - äººç”Ÿé¢å‘ç‰ˆ) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# gem: å¯¶çŸ³å»ºè­°
# design: è¨­è¨ˆé¢¨æ ¼
# metal: é‡‘å±¬æè³ª
# vibe: èƒ½é‡é—œéµå­—
# focus: ä¸»æ”»é¢å‘ (äº‹æ¥­/è²¡å¯Œ/æ„Ÿæƒ…/å®¶åº­/å¥åº·)
# reason: å¦³ç‚ºä»€éº¼éœ€è¦å®ƒ (å£èªåŒ–ç—›é»è§£æ±º)

totem_general = {
    # ğŸ”´ æ±æ–¹ç´…è‰²å®¶æ—
    "ç´…é¾": {
        "gem": "ç´…å¯¶çŸ³ã€çŸ³æ¦´çŸ³",
        "design": "å¾©å¤åœ“å½¢æµ®é›• (Cameo)",
        "metal": "ç«ç‘°é‡‘ (Rose Gold)",
        "vibe": "æ»‹é¤Šã€é‡ç”Ÿ",
        "focus": "ã€å®¶åº­ã€‘ã€ã€å¥åº·ã€‘",
        "reason": "ç´…é¾æ˜¯å®‡å®™çš„æ¯è¦ªã€‚ç•¶å¦³è¦ºå¾—ç…§é¡§å®¶äººå¥½ç´¯ã€æˆ–æ˜¯è‡ªå·±èº«é«”è™›å¼±æ™‚ï¼Œæˆ´ä¸Šå®ƒï¼Œå°±åƒæ¥é€šäº†å¤§åœ°ä¹‹æ¯çš„è‡å¸¶ï¼Œçµ¦å¦³æºæºä¸çµ•çš„æ»‹é¤Šèˆ‡é«”åŠ›ã€‚"
    },
    "ç´…è›‡": {
        "gem": "ç´…ç‘ªç‘™ã€ç´…ç¢§ç‰",
        "design": "è›‡å½¢æˆ’æŒ‡ã€è²¼èº«Ké‡‘ç´°éŠ",
        "metal": "ç«ç‘°é‡‘ / é»ƒKé‡‘",
        "vibe": "æœ¬èƒ½ã€æ´»åŠ›",
        "focus": "ã€å¥åº·ã€‘ã€ã€è²¡å¯Œã€‘",
        "reason": "æƒ³è¦æœ‰éŒ¢ï¼Œå…ˆè¦æœ‰é«”åŠ›ï¼ç´…è›‡æˆ´ä¸Šå®ƒèƒ½æ¿€æ´»å¦³çš„ä¸‹ä¸‰è¼ªï¼Œè®“å¦³å……æ»¿å¹¹å‹å»è³ºéŒ¢ï¼ŒåŒæ™‚è®“å¦³çš„èº«é«”æ„Ÿå®˜è®Šå¾—è¶…æ•éŠ³ï¼ŒçŸ¥é“éŒ¢åœ¨å“ªè£¡ã€‚"
    },
    "ç´…æœˆ": {
        "gem": "æœˆå…‰çŸ³ã€çç ",
        "design": "æ°´æ»´å‹åˆ‡å‰²ã€æ–°æœˆé€ å‹",
        "metal": "ç«ç‘°é‡‘ / éŠ€",
        "vibe": "æµå‹•ã€ç™‚ç™’",
        "focus": "ã€æ„Ÿæƒ…ã€‘ã€ã€å¥åº·ã€‘(å¥³æ€§èª¿ç†)",
        "reason": "é€™æ˜¯å°ˆå±¬å¥³äººçš„è­·èº«ç¬¦ã€‚ç•¶å¦³æƒ…ç·’èµ·ä¼å¤§ã€æˆ–æ˜¯åœ¨æ„Ÿæƒ…ä¸­è¦ºå¾—å—å§”å±ˆæ™‚ï¼Œçç èˆ‡æœˆå…‰çŸ³èƒ½æº«æŸ”æ¥ä½å¦³çš„çœ¼æ·šï¼Œè®“å¦³æ•£ç™¼è®“äººæƒ³ç–¼æ„›çš„æº«æŸ”å…‰æšˆã€‚"
    },
    "ç´…å¤©è¡Œè€…": {
        "gem": "ç´…ç´‹çŸ³ã€ç´…ç¢§ç’½",
        "design": "ç¾½æ¯›é€ å‹ã€æŒ‡å—é‡è¨­è¨ˆ",
        "metal": "ç«ç‘°é‡‘",
        "vibe": "æ¢ç´¢ã€è‡ªç”±",
        "focus": "ã€äº‹æ¥­ã€‘(æ¥­å‹™æ‹“å±•)",
        "reason": "å¦‚æœå¦³çš„å·¥ä½œéœ€è¦è·‘ä¾†è·‘å»ã€é–‹ç™¼æ–°å®¢æˆ¶ï¼Œæˆ–æ˜¯æƒ³ç•¶æ–œæ§“é’å¹´ã€‚é€™æ¬¾é£¾å“èƒ½å¹«å¦³æ‰“ç ´ç©ºé–“é™åˆ¶ï¼Œè®“å¦³èµ°åˆ°å“ªã€ç´…åˆ°å“ªï¼Œæ¥­ç¸¾ç„¡åœ‹ç•Œã€‚"
    },
    "ç´…åœ°çƒ": {
        "gem": "ç…™æ°´æ™¶ã€ç¥ç€",
        "design": "åŸç¤¦é¢¨æ ¼ã€æ¨¹æç‹€ç´‹ç†",
        "metal": "å¾©å¤é‡‘ / éŠ…",
        "vibe": "ç©©å¥ã€å…±æ™‚",
        "focus": "ã€è²¡å¯Œã€‘(è¢«å‹•æ”¶å…¥)ã€ã€äº‹æ¥­ã€‘(åœ˜éšŠ)",
        "reason": "ä¸ç”¨è²»åŠ›è¿½éŒ¢ï¼Œè®“éŒ¢ä¾†è¿½å¦³ã€‚æˆ´ä¸Šå®ƒï¼Œèƒ½å¹«å¦³é‡åˆ°å°çš„åˆä½œå¤¥ä¼´ï¼ˆè²´äººï¼‰ï¼Œè®“å¦³çš„äº‹æ¥­ç©©ç©©æ‰æ ¹ï¼Œè²¡å¯Œåƒå¤§æ¨¹ä¸€æ¨£é•·å¤§ã€‚"
    },
    # âšª åŒ—æ–¹ç™½è‰²å®¶æ—
    "ç™½é¢¨": {
        "gem": "ç™½ç‰é«“ã€è›‹ç™½çŸ³",
        "design": "æµè˜‡è€³ç·šã€é¤ç©ºè•¾çµ²",
        "metal": "ç™½é‡‘ / 925ç´”éŠ€",
        "vibe": "æºé€šã€éˆæ€§",
        "focus": "ã€äº‹æ¥­ã€‘(æºé€šè¡¨é”)ã€ã€æ„Ÿæƒ…ã€‘",
        "reason": "å¦‚æœå¦³æ˜¯è€å¸«ã€è¬›å¸«ã€ç›´æ’­ä¸»ï¼Œæˆ´ä¸Šå®ƒå®ˆè­·å–‰è¼ªï¼å®ƒèƒ½è®“å¦³èªªå‡ºä¾†çš„è©±æ›´æœ‰æ„ŸæŸ“åŠ›ã€‚åœ¨æ„Ÿæƒ…ä¸­ï¼Œå®ƒèƒ½å¹«å¦³æŠŠå¿ƒè£¡è©±å¥½å¥½èªªå‡ºä¾†ï¼Œæ¸›å°‘èª¤æœƒã€‚"
    },
    "ç™½ä¸–ç•Œæ©‹": {
        "gem": "æ‹‰é•·çŸ³ã€éŠ€æ›œçŸ³",
        "design": "æ¥µç°¡é‡‘å±¬éŠæ¢ã€é›™æŒ‡æˆ’",
        "metal": "ç™½é‡‘ / éŠ€",
        "vibe": "é€£çµã€é‡‹æ”¾",
        "focus": "ã€äº‹æ¥­ã€‘(è·¨ç•Œäººè„ˆ)ã€ã€å¥åº·ã€‘(é‡‹æ”¾å£“åŠ›)",
        "reason": "æƒ³è«‡æˆå¤§ç”Ÿæ„ï¼Ÿéœ€è¦ç‰½ç·šï¼Ÿç™½ä¸–ç•Œæ©‹æ˜¯æœ€å¥½çš„ã€Œæ©‹æ¨‘ã€ã€‚å®ƒèƒ½å¹«å¦³é€£çµä¸åŒé ˜åŸŸçš„äººè„ˆã€‚åŒæ™‚ï¼Œå®ƒä¹Ÿå¹«åŠ©å¦³ã€Œæ”¾ä¸‹ã€éæœŸçš„å£“åŠ›ï¼Œæ–·æ¨é›¢èˆŠçš„äººäº‹ç‰©ã€‚"
    },
    "ç™½ç‹—": {
        "gem": "ç²‰æ™¶ã€æ‘©æ ¹çŸ³",
        "design": "å¿ƒå‹è¨­è¨ˆã€ç¹©çµè¨­è¨ˆ",
        "metal": "ç«ç‘°é‡‘ / ç™½é‡‘",
        "vibe": "çœŸæ„›ã€å¿ èª ",
        "focus": "ã€æ„Ÿæƒ…ã€‘ã€ã€å®¶åº­ã€‘(æœ€å¼·çš„æ„›)",
        "reason": "é€™æ˜¯é¦¬é›…æ›†æ³•è£¡çš„ã€Œæ„›ç¥ã€ã€‚ä¸ç®¡æ˜¯æƒ³è„«å–®ã€æƒ³è·Ÿè€å…¬é‡ç‡ƒæ„›ç«ï¼Œé‚„æ˜¯ä¿®å¾©å®¶äººé—œä¿‚ã€‚æˆ´ä¸Šå®ƒï¼Œå°±æ˜¯å‘Šè¨´å®‡å®™ï¼šã€Œæˆ‘æº–å‚™å¥½æ¥æ”¶æ„›ï¼Œä¹Ÿçµ¦å‡ºæ„›äº†ã€‚ã€"
    },
    "ç™½å·«å¸«": {
        "gem": "ç´«æ°´æ™¶ã€ç´«é‹°è¼",
        "design": "è²“çœ¼çŸ³ã€ç¥ç¥•ç¬¦è™Ÿå¢œé£¾",
        "metal": "ç™½é‡‘ / éŠ€",
        "vibe": "é­”æ³•ã€å¹³éœ",
        "focus": "ã€è²¡å¯Œã€‘(é¡¯åŒ–æ³•å‰‡)ã€ã€å¥åº·ã€‘(å¿ƒéˆå¹³éœ)",
        "reason": "å¦³å®¹æ˜“ç„¦æ…®å—ï¼Ÿç™½å·«å¸«æ•™å¦³ã€Œç„¡ç‚ºè€Œæ²»ã€ã€‚æˆ´ä¸Šç´«æ°´æ™¶ï¼Œè®“è…¦è¢‹å®‰éœä¸‹ä¾†ï¼Œå¦³æœƒç™¼ç¾ç•¶å¦³ä¸ç„¦æ…®æ™‚ï¼Œæƒ³è¦çš„å¥½é‹åè€Œè‡ªå·±é€ä¸Šé–€äº†ï¼ˆé€™å°±æ˜¯é­”æ³•ï¼‰ã€‚"
    },
    "ç™½é¡": {
        "gem": "ç™½æ°´æ™¶ã€ç™½æ‹“å¸•çŸ³",
        "design": "é¡é¢å¯¬ç‰ˆéŠ€æˆ’ã€ç¥–æ¯ç¶ åˆ‡å‰²",
        "metal": "ç™½é‡‘ / éŠ€",
        "vibe": "çœŸç›¸ã€ç§©åº",
        "focus": "ã€äº‹æ¥­ã€‘(åˆ¤æ–·åŠ›)ã€ã€æ„Ÿæƒ…ã€‘(çœ‹æ¸…çœŸç›¸)",
        "reason": "è·å ´ä¸Šå°äººå¾ˆå¤šï¼Ÿæ„Ÿæƒ…ä¸­æ€•è¢«é¨™ï¼Ÿç™½é¡åƒä¸€æŠŠåˆ©åŠï¼Œå¹«å¦³æ–¬æ–·è™›å‡çš„è¬Šè¨€ï¼Œè®“å¦³çœ‹æ¸…æ¥šèª°æ‰æ˜¯çœŸæ­£å€¼å¾—æŠ•å…¥çš„äººï¼Œåšå‡ºæœ€ç†æ€§çš„åˆ¤æ–·ã€‚"
    },
    # ğŸ”µ è¥¿æ–¹è—è‰²å®¶æ—
    "è—å¤œ": {
        "gem": "é’é‡‘çŸ³ã€è—ç ‚çŸ³",
        "design": "æ˜Ÿæœˆé€ å‹ã€æ˜Ÿç©ºæ„Ÿè¨­è¨ˆ",
        "metal": "Kç™½é‡‘ / é»ƒKé‡‘",
        "vibe": "ç›´è¦ºã€è±ç››",
        "focus": "ã€è²¡å¯Œã€‘(ç›´è¦ºè‡´å¯Œ)",
        "reason": "é€™æ˜¯é¦¬é›…æ›†æ³•è£¡çš„ã€Œå¤§è²¡åº«ã€ï¼è—å¤œæŒç®¡è±ç››èˆ‡å¤¢æƒ³ã€‚æˆ´ä¸Šåƒæ˜Ÿç©ºä¸€æ¨£çš„å¯¶çŸ³ï¼Œèƒ½å¢å¼·å¦³çš„ç†è²¡ç›´è¦ºï¼Œé©åˆåšæŠ•è³‡ã€å‰µæ¥­çš„äººï¼Œè®“å¦³æ•¢åšç™¼è²¡å¤¢ï¼Œä¹Ÿèƒ½å¯¦ç¾å®ƒã€‚"
    },
    "è—æ‰‹": {
        "gem": "ç¶ æ¾çŸ³ã€æµ·è—å¯¶",
        "design": "æ‰‹æŒé€ å‹ (Hamsa Hand)ã€ç–Šæˆ´æˆ’æŒ‡",
        "metal": "Kç™½é‡‘ / éŠ€",
        "vibe": "åŸ·è¡Œã€ç™‚ç™’",
        "focus": "ã€äº‹æ¥­ã€‘(åŸ·è¡ŒåŠ›)ã€ã€å¥åº·ã€‘(ç™‚ç™’)",
        "reason": "æƒ³å¾—å¤šã€åšå¾—å°‘ï¼Ÿäº‹æƒ…æ°¸é åšä¸å®Œï¼Ÿè—æ‰‹é£¾å“æˆ´åœ¨æ‰‹ä¸Šï¼Œå°±æ˜¯æé†’å¦³ã€Œç¾åœ¨å°±åšã€ã€‚åŒæ™‚å®ƒæœ‰å¼·å¤§çš„ç™‚ç™’åŠ›ï¼Œé©åˆé†«è­·äººå“¡ã€ç™‚ç™’å¸«ä½©æˆ´ã€‚"
    },
    "è—çŒ´": {
        "gem": "ç£·ç°çŸ³ã€å¤šå½©å‰›ç‰",
        "design": "ä¸å°ç¨±ç«¥è¶£è€³ç’°ã€æ‹¼åœ–é€ å‹",
        "metal": "Kç™½é‡‘",
        "vibe": "ç©æ¨‚ã€å¹½é»˜",
        "focus": "ã€å®¶åº­ã€‘(è¦ªå­é—œä¿‚)ã€ã€å¥åº·ã€‘(å¿«æ¨‚)",
        "reason": "è¦ºå¾—äººç”Ÿå¤ªè‹¦ã€å£“åŠ›å¤ªå¤§ï¼Ÿè—çŒ´å¹«å¦³æ‰¾å›ã€Œç©å¿ƒã€ã€‚æˆ´ä¸Šç¹½ç´›çš„é£¾å“ï¼Œè®“å¦³é¢å°è‚²å…’å´©æ½°æ™‚èƒ½ä¸€ç¬‘ç½®ä¹‹ï¼Œç”¨å¹½é»˜æ„ŸåŒ–è§£å®¶åº­æ°£æ°›ï¼Œå¿«æ¨‚æ˜¯æœ€å¥½çš„è—¥ã€‚"
    },
    "è—é·¹": {
        "gem": "è—å¯¶çŸ³ã€å¦æ¡‘çŸ³",
        "design": "ç¿…è†€/çœ¼ç›æ„è±¡ã€Vå‹é …éŠ",
        "metal": "Kç™½é‡‘",
        "vibe": "è¦–é‡ã€æ ¼å±€",
        "focus": "ã€äº‹æ¥­ã€‘(å‡é·ã€é¡˜æ™¯)",
        "reason": "è¦ºå¾—å·¥ä½œå¡é—œã€çœ‹ä¸åˆ°æœªä¾†ï¼Ÿè—é·¹çµ¦å¦³ã€Œè€é·¹èˆ¬çš„è¦–é‡ã€ã€‚å®ƒé©åˆè€é—†ã€ä¸»ç®¡ï¼Œå¹«å¦³çœ‹æ¸…å¸‚å ´å±€å‹¢ï¼Œé£›å¾—æ¯”åˆ¥äººé«˜ï¼Œçœ‹å¾—æ¯”åˆ¥äººé ã€‚"
    },
    "è—é¢¨æš´": {
        "gem": "ç´«é¾æ™¶ã€é»‘æ›œçŸ³",
        "design": "é–ƒé›»é€ å‹ã€ä¸è¦å‰‡é‡‘å±¬",
        "metal": "Kç™½é‡‘ / é»‘é‡‘",
        "vibe": "æ”¹é©ã€ç¿»è½‰",
        "focus": "ã€äº‹æ¥­ã€‘(è½‰è·ã€æ”¹é©)ã€ã€è²¡å¯Œã€‘(ç¿»è½‰)",
        "reason": "æƒ³è·³æ§½ï¼Ÿæƒ³æŠŠèˆŠé«”åˆ¶æ‰“æ‰é‡ç·´ï¼Ÿè—é¢¨æš´æ˜¯å¼·å¤§çš„å‚¬åŒ–åŠ‘ã€‚æˆ´ä¸Šå®ƒï¼Œè®“å¦³æœ‰å‹‡æ°£é¢å°æ··äº‚ï¼Œåœ¨è®Šå‹•ä¸­æ‰¾åˆ°ç¿»èº«çš„æ©Ÿæœƒï¼ŒæŠŠå±æ©Ÿè®Šè½‰æ©Ÿã€‚"
    },
    # ğŸŸ¡ å—æ–¹é»ƒè‰²å®¶æ—
    "é»ƒç¨®å­": {
        "gem": "æ©„æ¬–çŸ³ã€ç¶ ç¢§ç’½",
        "design": "è›‹é¢åˆ‡å‰²ã€èŠ±è‹é€ å‹",
        "metal": "18Ké»ƒé‡‘",
        "vibe": "æ½›åŠ›ã€æ”¶ç©«",
        "focus": "ã€è²¡å¯Œã€‘(é•·æœŸæŠ•è³‡)ã€ã€äº‹æ¥­ã€‘(æ½›åŠ›)",
        "reason": "å¦‚æœå¦³æ­£åœ¨å‰µæ¥­åˆæœŸï¼Œæˆ–æ˜¯åœ¨å­˜ç¬¬ä¸€æ¡¶é‡‘ã€‚é»ƒç¨®å­çµ¦å¦³ã€Œè€å¿ƒã€ã€‚æˆ´ä¸Šå®ƒï¼Œå®ˆè­·å¦³å¿ƒä¸­çš„ç›®æ¨™ï¼Œè®“å®ƒåœ¨æœ€å°çš„æ™‚æ©Ÿç™¼èŠ½ã€é–‹èŠ±ã€çµæœã€‚"
    },
    "é»ƒæ˜Ÿæ˜Ÿ": {
        "gem": "é»ƒé‘½ã€é‹¯çŸ³",
        "design": "æ˜Ÿå‹è¨­è¨ˆã€å…«èŠ’æ˜Ÿ",
        "metal": "18Ké»ƒé‡‘",
        "vibe": "é­…åŠ›ã€è—è¡“",
        "focus": "ã€äº‹æ¥­ã€‘(å€‹äººå“ç‰Œ)ã€ã€æ„Ÿæƒ…ã€‘(é­…åŠ›)",
        "reason": "é€™æ˜¯ä¸€å€‹ã€Œçœ‹è‡‰ã€çš„æ™‚ä»£ã€‚é»ƒæ˜Ÿæ˜Ÿå¹«å¦³æŠŠã€Œç¾ã€è®Šæˆç«¶çˆ­åŠ›ã€‚é©åˆéœ€è¦ç«™ä¸Šèˆå°ã€ç¶“ç‡ŸIGçš„äººï¼Œè®“å¦³å„ªé›…åœ°ç™¼å…‰ï¼Œå¸å¼•æ‰€æœ‰äººçš„ç›®å…‰ã€‚"
    },
    "é»ƒäºº": {
        "gem": "é»ƒæ°´æ™¶ã€æ‰˜å¸•çŸ³",
        "design": "ç¶“å…¸å–®é‘½ã€æ™ºæ…§ä¹‹æ¯",
        "metal": "18Ké»ƒé‡‘",
        "vibe": "æ™ºæ…§ã€è‡ªä¸»",
        "focus": "ã€äº‹æ¥­ã€‘(æ±ºç­–)ã€ã€å¥åº·ã€‘(è‡ªä¸»æ¬Š)",
        "reason": "é€™æ˜¯æœ‰æ™ºæ…§çš„è±¡å¾µã€‚ç•¶å¦³é¢è‡¨äººç”Ÿé‡å¤§åå­—è·¯å£ï¼Œä¸çŸ¥é“è©²é¸å“ªæ¢è·¯æ™‚ï¼Œæˆ´ä¸Šé»ƒæ°´æ™¶ï¼Œå®ƒèƒ½æ¸…æ˜å¦³çš„æ€ç·’ï¼Œè®“å¦³åšå‡ºä¸å¾Œæ‚”çš„æ±ºå®šã€‚"
    },
    "é»ƒæˆ°å£«": {
        "gem": "é»ƒéµç¤¦ã€éˆ¦æ™¶",
        "design": "ç›¾ç‰Œ/é‰šé‡˜è¨­è¨ˆã€å¹¾ä½•é€ å‹",
        "metal": "18Ké»ƒé‡‘ / é»‘é‡‘",
        "vibe": "å‹‡æ°£ã€çªç ´",
        "focus": "ã€äº‹æ¥­ã€‘(çªç ´å›°é›£)ã€ã€è²¡å¯Œã€‘(è†½è­˜)",
        "reason": "æ€•è¼¸ï¼Ÿæ€•è¢«æ‹’çµ•ï¼Ÿé»ƒæˆ°å£«æ˜¯å¦³çš„å‹‡æ°£ç›¾ç‰Œã€‚æ¥­å‹™å“¡å¿…å‚™ï¼æˆ´ä¸Šå®ƒï¼Œè®“å¦³æ•¢æ–¼æå•ã€æ•¢æ–¼çˆ­å–ï¼Œå“ªæ€•å‰é¢æœ‰å›°é›£ï¼Œå¦³ä¹Ÿèƒ½å¸¥æ°£åœ°è·¨éå»ã€‚"
    },
    "é»ƒå¤ªé™½": {
        "gem": "å¤ªé™½çŸ³ã€ç¥ç€",
        "design": "å¤ªé™½å…‰èŠ’è¨­è¨ˆã€18Kåšé‡‘",
        "metal": "18Ké»ƒé‡‘",
        "vibe": "å¥½é‹ã€æ´»åŠ›",
        "focus": "ã€å…¨æ–¹ä½ã€‘(å¥½é‹)ã€ã€å¥åº·ã€‘(æ´»åŠ›)",
        "reason": "é€™å°±æ˜¯ä¸€é¡†å°å¤ªé™½æ›åœ¨èº«ä¸Šï¼å¦‚æœä½ æœ€è¿‘è¦ºå¾—é‹æ°£é™°é™°çš„ã€èº«é«”å†·å†·çš„ï¼Œæˆ´ä¸Šå®ƒé©…æ•£é™°éœ¾ã€‚è®“å¦³æˆç‚ºä¸€å€‹æº«æš–çš„äººï¼Œå¥½äº‹è‡ªç„¶æœƒè¢«å¦³å¸å¼•éä¾†ã€‚"
    }
}

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 2. Tru-Mi Product Mapping (å“ç‰Œç”¢å“å°æ‡‰ - ç”·å¥³åˆ†æµ) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
totem_trumi = {
    "ç´…é¾": {
        "F": {"series": "Memory ç³»åˆ—", "item": "Memory æ¨¹ææ¬¾è€³ç’°/æˆ’æŒ‡", "desc": "æ¨¹æç´‹ç†è±¡å¾µå®¶æ—æ ¹ç³»ï¼Œé€£çµå¤§åœ°æ¯è¦ªèƒ½é‡ã€‚", "url": "https://www.tru-mi.com/collections/memory"},
        "M": {"series": "Memory ç³»åˆ— (ä¸­æ€§æ¬¾)", "item": "Memory æ¨¹æç´‹å¯¬ç‰ˆæˆ’", "desc": "å¯¬ç‰ˆæ¨¹æç´‹ç†ï¼Œè±¡å¾µå®¶æ—æ¦®è€€èˆ‡ç©©å›ºæ ¹åŸºã€‚", "url": "https://www.tru-mi.com/collections/memory"}
    },
    "ç´…è›‡": {
        "F": {"series": "Resilience ç³»åˆ—", "item": "Resilience æ–œç´‹/é ˜å¸¶ç³»åˆ—", "desc": "æ–œç´‹è¨­è¨ˆè±¡å¾µåœ¨éƒ½å¸‚å¢æ—ä¸­éˆæ´»ç©¿æ¢­çš„éŸŒæ€§ã€‚", "url": "https://www.tru-mi.com/collections/resilience"},
        "M": {"series": "Resilience ç³»åˆ—", "item": "Resilience å¹¾ä½•é ˜å¸¶å¤¾/æˆ’æŒ‡", "desc": "å¹¾ä½•åˆ‡é¢è±¡å¾µè›»è®Šï¼Œè·å ´ä¸Šçš„åŠ›é‡è­·èº«ç¬¦ã€‚", "url": "https://www.tru-mi.com/collections/resilience"}
    },
    "ç´…æœˆ": {
        "F": {"series": "Minilife ç³»åˆ—", "item": "Minilife å¤¢æƒ³çš„æµ·æ´‹", "desc": "æµ·æ´‹æº«æŸ”æ³¢æµªï¼Œæ¥ä½æƒ…ç·’ï¼Œç™‚ç™’çœ¼æ·šèˆ‡æ­¡ç¬‘ã€‚", "url": "https://www.tru-mi.com/collections/minilife"},
        "M": {"series": "Flawless ç³»åˆ—", "item": "Flawless æ»¾ç éŠ€æˆ’", "desc": "ç°¡ç´„éŠ€é£¾å¦‚æœˆå…‰ç…§è€€æµ·é¢ï¼Œç©©å®šå…§åœ¨æƒ…ç·’æ½®æ±ã€‚", "url": "https://www.tru-mi.com/collections/flawless"}
    },
    "ç´…å¤©è¡Œè€…": {
        "F": {"series": "Morning Star ç³»åˆ—", "item": "æ™¨æ˜Ÿç³»åˆ—-æ˜Ÿé¡˜é …éŠ", "desc": "æ˜ŸèŠ’å¦‚å¤œç©ºç¾…ç›¤ï¼Œç‚ºå–œæ„›å†’éšªçš„å¦³æŒ‡å¼•æ–¹å‘ã€‚", "url": "https://www.tru-mi.com/collections/morning-star"},
        "M": {"series": "å°ˆå±¬è¨‚è£½", "item": "å®¢è£½åŒ–ç¶“ç·¯åº¦/ç¾…ç›¤é£¾å“", "desc": "è¨‚è£½åˆ»æœ‰ç‰¹æ®Šåœ°é»ç¶“ç·¯åº¦é£¾å“ï¼Œç´€å¿µç©ºé–“æ¢ç´¢ã€‚", "url": "https://www.tru-mi.com/custom-jewelry"}
    },
    "ç´…åœ°çƒ": {
        "F": {"series": "Memory ç³»åˆ—", "item": "Memory å–®èŠ±/æ¨¹ææ¬¾", "desc": "æ¤ç‰©æœ‰æ©Ÿç”Ÿé•·ç´‹ç†ï¼Œä¿æŒèˆ‡è‡ªç„¶æ¥åœ°çš„ç©©å®šé »ç‡ã€‚", "url": "https://www.tru-mi.com/collections/memory"},
        "M": {"series": "Memory ç³»åˆ—", "item": "Memory æ¨¹æç´‹ç†æˆ’ (éœ§é¢)", "desc": "ç²—ç·æ¨¹æç´‹ç†æ­é…éœ§é¢è™•ç†ï¼Œå±•ç¾å¤§åœ°èˆ¬åšå¯¦è³ªæ„Ÿã€‚", "url": "https://www.tru-mi.com/collections/memory"}
    },
    "ç™½é¢¨": {
        "F": {"series": "Flawless ç³»åˆ—", "item": "Flawless å­”ç å¥—éŠ", "desc": "æ¥µç°¡å­”ç è¨­è¨ˆï¼Œè±¡å¾µè©±èªåœ“æ»¿é€šé€ï¼Œæºé€šå¦‚é¢¨èˆ¬è‡ªç”±ã€‚", "url": "https://www.tru-mi.com/collections/flawless"},
        "M": {"series": "Flawless ç³»åˆ—", "item": "Flawless æ¥µç°¡éŠ€æˆ’", "desc": "ä¹¾æ·¨ç„¡å¤šé¤˜è£é£¾éŠ€æˆ’ï¼Œè±¡å¾µè¨€èªçš„çœŸå¯¦èˆ‡ç´”ç²¹ã€‚", "url": "https://www.tru-mi.com/collections/flawless"}
    },
    "ç™½ä¸–ç•Œæ©‹": {
        "F": {"series": "å©šæˆ’/å°æˆ’ç³»åˆ—", "item": "Tru-Mi é›™è‰²æ‹¼æ¥å°æˆ’", "desc": "è±¡å¾µè·¨è¶Šå€‹é«”ã€é€£çµå½¼æ­¤çš„ç¥è–æ‰¿è«¾ã€‚", "url": "https://www.tru-mi.com/wedding"},
        "M": {"series": "å©šæˆ’/å°æˆ’ç³»åˆ—", "item": "Tru-Mi å¹¾ä½•åˆ‡é¢å°æˆ’", "desc": "çµæ§‹æ€§å¼·çš„å°æˆ’è¨­è¨ˆï¼Œä»£è¡¨å»ºç«‹é€£çµæ‰€éœ€çš„ç©©å®šã€‚", "url": "https://www.tru-mi.com/wedding"}
    },
    "ç™½ç‹—": {
        "F": {"series": "Beloved ç³»åˆ—", "item": "Beloved éˆ´éº/å¯µç‰©è¨‚è£½", "desc": "ç„¡è«–å¯µç‰©ç å¯¶æˆ–æº«æš–è¨­è¨ˆï¼Œæ»‹é¤Šå……æ»¿æ„›èˆ‡å¿ èª çš„å¿ƒè¼ªã€‚", "url": "https://www.tru-mi.com/baby-gifts-beloved"},
        "M": {"series": "Mi ç³»åˆ—", "item": "Mi åˆ»å­—æ‰‹éŠ (çš®é©/éŠ€)", "desc": "åˆ»ä¸Šé‡è¦å¤¥ä¼´åå­—ï¼Œè±¡å¾µå°å®ˆè­·å°è±¡çš„æ‰¿è«¾ã€‚", "url": "https://www.tru-mi.com/collections/mi"}
    },
    "ç™½å·«å¸«": {
        "F": {"series": "Minilife ç³»åˆ—", "item": "Minilife ç§˜å¯†èŠ±åœ’", "desc": "ç²¾ç·»å¾®å°è¨­è¨ˆå¦‚é­”æ³•è­·èº«ç¬¦ï¼Œæé†’å¦³å‘å…§è§€çœ‹ã€‚", "url": "https://www.tru-mi.com/collections/minilife"},
        "M": {"series": "Memory ç³»åˆ—", "item": "Memory æ²‰ç©©æ¬¾æˆ’æŒ‡", "desc": "è¨­è¨ˆå…§æ–‚å¸¶æœ‰æ‰‹ä½œæº«åº¦ï¼Œå®‰ä½ç•¶ä¸‹ï¼Œå±•ç¾æ„å¿—åŠ›é‡ã€‚", "url": "https://www.tru-mi.com/collections/memory"}
    },
    "ç™½é¡": {
        "F": {"series": "Flawless ç³»åˆ—", "item": "Flawless æ»¾ç éŠ€æˆ’ (äº®é¢)", "desc": "ç²¾ç´°æ‹‹å…‰éŠ€é£¾å¦‚é¡é¢æ˜ ç…§çœŸå¯¦è‡ªå·±ï¼Œå±•ç¾ç§©åºä¹‹ç¾ã€‚", "url": "https://www.tru-mi.com/collections/flawless"},
        "M": {"series": "Flawless ç³»åˆ—", "item": "Flawless å¹³é¢éŠ€æˆ’ (äº®é¢)", "desc": "å¦‚åˆ€é‹’èˆ¬ä¿è½äº®é¢éŠ€æˆ’ï¼Œè±¡å¾µæ´å¯ŸçœŸç›¸çš„æ±ºæ–·åŠ›ã€‚", "url": "https://www.tru-mi.com/collections/flawless"}
    },
    "è—å¤œ": {
        "F": {"series": "Morning Star ç³»åˆ—", "item": "æ™¨æ˜Ÿç³»åˆ—-æ˜Ÿé¡˜é …éŠ", "desc": "å°‡ç›´è¦ºèˆ‡å¤¢å¢ƒé¡¯åŒ–ç‚ºç¾å¯¦ï¼Œå®ˆè­·å…§åœ¨è±ç››ç’€ç’¨æ˜Ÿç©ºã€‚", "url": "https://www.tru-mi.com/collections/morning-star"},
        "M": {"series": "Resilience ç³»åˆ—", "item": "Resilience å¹¾ä½•é€ å‹", "desc": "ä»¥å¹¾ä½•çµæ§‹æ•æ‰å¤¢æƒ³å½¢ç‹€ï¼Œå°‡æ½›æ„è­˜è±ç››é¡¯åŒ–ç‚ºç‰©è³ªã€‚", "url": "https://www.tru-mi.com/collections/resilience"}
    },
    "è—æ‰‹": {
        "F": {"series": "å°ˆå±¬è¨‚è£½", "item": "Tru-Mi æ‰‹ä½œé«”é©—èª²ç¨‹", "desc": "æ¨è–¦åƒèˆ‡ã€Œæ‰‹ä½œé«”é©—ã€ï¼Œè¦ªæ‰‹æ‰“é€ ç™‚ç™’èˆ‡å‰µé€ çš„è­‰æ˜ã€‚", "url": "https://www.tru-mi.com/custom-jewelry"},
        "M": {"series": "å°ˆå±¬è¨‚è£½", "item": "å…¨è¨‚è£½å·¥è—æœå‹™", "desc": "é€éè¨‚è£½æœå‹™ï¼Œå°‡ä½ çš„æƒ³æ³•é€éå·¥è—è½‰åŒ–ç‚ºç¾å¯¦ã€‚", "url": "https://www.tru-mi.com/custom-jewelry"}
    },
    "è—çŒ´": {
        "F": {"series": "Beloved ç³»åˆ—", "item": "Beloved æ–æ–é¦¬/å…”æ‰‹éŠ", "desc": "å……æ»¿ç«¥å¿ƒè¨­è¨ˆï¼Œå–šé†’å…§åœ¨å°å­©çš„å¹½é»˜èˆ‡ç´”çœŸå¿«æ¨‚ã€‚", "url": "https://www.tru-mi.com/baby-gifts-beloved"},
        "M": {"series": "Mi ç³»åˆ—", "item": "Mi è¶£å‘³åˆ»å­—/åœ–é¨°è¨‚è£½", "desc": "è¨‚è£½å¸¶æœ‰å¹½é»˜èªå¥æˆ–ç‰¹æ®Šåœ–é¨°é£¾å“ï¼Œå±•ç¾ç©å¿ƒã€‚", "url": "https://www.tru-mi.com/collections/mi"}
    },
    "è—é·¹": {
        "F": {"series": "Resilience ç³»åˆ—", "item": "Resilience é ˜å¸¶è€³ç’°/é …éŠ", "desc": "é ˜å¸¶é€ å‹è±¡å¾µå°ˆæ¥­èˆ‡é¡˜æ™¯ï¼ŒåŠ©å¦³åœ¨äº‹æ¥­è—åœ–å±•ç¿…é«˜é£›ã€‚", "url": "https://www.tru-mi.com/collections/resilience"},
        "M": {"series": "Resilience ç³»åˆ—", "item": "Resilience é ˜å¸¶å¤¾/è¢–æ‰£", "desc": "å°ˆç‚ºç”·å£«è¨­è¨ˆé ˜å¸¶é€ å‹é£¾å“ï¼Œå±•ç¾é è¦‹èˆ‡é ˜è¢–æ°£å ´ã€‚", "url": "https://www.tru-mi.com/collections/resilience"}
    },
    "è—é¢¨æš´": {
        "F": {"series": "Minilife ç³»åˆ—", "item": "Minilife å¤¢æƒ³çš„æµ·æ´‹ (æ³¢æµª)", "desc": "èµ·ä¼æ³¢æµªç·šæ¢ï¼Œè±¡å¾µæ“æŠ±è®Šå‹•ã€è½‰åŒ–èƒ½é‡çš„æœ¬è³ªã€‚", "url": "https://www.tru-mi.com/collections/minilife"},
        "M": {"series": "Memory ç³»åˆ—", "item": "Memory æ•²æ“Šç´‹ç†æˆ’", "desc": "å……æ»¿é›æ•²ç—•è·¡æˆ’æŒ‡ï¼Œè±¡å¾µç¶“æ­·é¢¨æš´æ´—ç¦®å¾Œçš„å …éŸŒã€‚", "url": "https://www.tru-mi.com/collections/memory"}
    },
    "é»ƒç¨®å­": {
        "F": {"series": "Memory ç³»åˆ—", "item": "Memory å–®èŠ±è€³ç’°", "desc": "èŠ±æœµé€ å‹è±¡å¾µè€å¿ƒèˆ‡æˆé•·ï¼Œç¥ç¦å¤¢æƒ³ç¨®å­é †åˆ©ç ´åœŸã€‚", "url": "https://www.tru-mi.com/collections/memory"},
        "M": {"series": "Memory ç³»åˆ—", "item": "Memory ç°¡ç´„åœˆæˆ’", "desc": "ç°¡å–®åœˆæˆ’è˜Šå«ç„¡é™ç”Ÿæ©Ÿï¼Œè±¡å¾µå°ˆæ³¨ç›®æ¨™çš„æŒçºŒæˆé•·ã€‚", "url": "https://www.tru-mi.com/collections/memory"}
    },
    "é»ƒæ˜Ÿæ˜Ÿ": {
        "F": {"series": "Morning Star ç³»åˆ—", "item": "æ™¨æ˜Ÿç³»åˆ— (æ˜Ÿé‘½æ¬¾)", "desc": "é–ƒè€€å…‰èŠ’å‘¼æ‡‰å¦³å¤©ç”Ÿè¦åœ¨äººç¾¤ç™¼å…‰ç™¼ç†±çš„ç‰¹è³ªã€‚", "url": "https://www.tru-mi.com/collections/morning-star"},
        "M": {"series": "Morning Star ç³»åˆ—", "item": "æ™¨æ˜Ÿç³»åˆ— (ç„¡é‘½Ké‡‘)", "desc": "ç·šæ¢å„ªé›…Ké‡‘é£¾å“ï¼Œå±•ç¾ä¸å‡¡å“å‘³èˆ‡è—è¡“çœ¼å…‰ã€‚", "url": "https://www.tru-mi.com/collections/morning-star"}
    },
    "é»ƒäºº": {
        "F": {"series": "Mi ç³»åˆ—", "item": "Mi å‘Šç™½é …éŠ (åˆ»å­—)", "desc": "å°‡äººç”Ÿæ ¼è¨€åˆ»åœ¨é£¾å“ä¸Šï¼Œæ™‚åˆ»æé†’è‡ªå·±æœ‰æ„è­˜é¸æ“‡ã€‚", "url": "https://www.tru-mi.com/collections/mi"},
        "M": {"series": "Mi ç³»åˆ—", "item": "Mi åˆ»å­—å¯¬ç‰ˆæ‰‹ç’°", "desc": "å°‡ä¿¡å¿µåˆ»åœ¨å¯¬ç‰ˆæ‰‹ç’°ï¼Œè±¡å¾µè‡ªç”±æ„å¿—èˆ‡æ™ºæ…§å±•ç¾ã€‚", "url": "https://www.tru-mi.com/collections/mi"}
    },
    "é»ƒæˆ°å£«": {
        "F": {"series": "Resilience ç³»åˆ—", "item": "Resilience å¹¾ä½•é€ å‹æˆ’", "desc": "å¹¾ä½•çµæ§‹å¦‚éš±å½¢é§ç”²ï¼Œè±¡å¾µæ‰æ™ºå‹‡æ°£ï¼Œé™ªä¼´é¢å°æŒ‘æˆ°ã€‚", "url": "https://www.tru-mi.com/collections/resilience"},
        "M": {"series": "Resilience ç³»åˆ—", "item": "Resilience ç›¾ç‰Œæ„è±¡é£¾å“", "desc": "çµæ§‹æ„Ÿå¼·çƒˆå¦‚æˆ°å£«ç›¾ç‰Œï¼Œè³¦äºˆç„¡ç•å‰è¡Œçš„å‹‡æ°£ã€‚", "url": "https://www.tru-mi.com/collections/resilience"}
    },
    "é»ƒå¤ªé™½": {
        "F": {"series": "Morning Star ç³»åˆ—", "item": "æ™¨æ˜Ÿç³»åˆ— (é‡‘è‰²æ¬¾)", "desc": "é‡‘è‰²é£¾å“è±¡å¾µç„¡ç§æº«æš–å…‰èŠ’ï¼Œå±•ç¾å¤§æ°£é ˜è¢–é¢¨ç¯„ã€‚", "url": "https://www.tru-mi.com/collections/morning-star"},
        "M": {"series": "å©šæˆ’/å°æˆ’ç³»åˆ—", "item": "åšå¯¦Ké‡‘æˆ’æŒ‡", "desc": "åšå¯¦æœ‰ä»½é‡Ké‡‘æˆ’æŒ‡ï¼Œè±¡å¾µå¤ªé™½èˆ¬æ†ä¹…ä¸è®Šçš„èƒ½é‡ã€‚", "url": "https://www.tru-mi.com/wedding"}
    }
}

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 3. Tone Advice (13èª¿æ€§-çµæ§‹å»ºè­° - ç”·å¥³åˆ†æµ) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
tone_advice = {
    1:  {
        "name": "ç£æ€§ (Magnetic)", 
        "F": {"structure": "å–®é‘½ / å–®å¢œ", "style": "ã€å–®æˆ´èšç„¦ã€‘é¸ä¸€æ¢æœ€å–œæ­¡çš„é …éŠã€Œå–®ç¨ä½©æˆ´ã€ï¼Œè®“å®ƒæˆç‚ºå…¨èº«çš„äº®é»ï¼Œå¹«å¦³æŠŠæ•£äº‚çš„èƒ½é‡éƒ½é›†ä¸­èµ·ä¾†ï¼Œå°ˆæ³¨åœ¨ç›®æ¨™ä¸Šã€‚"},
        "M": {"structure": "å°ç« æˆ’æŒ‡ (Signet Ring)", "style": "ã€å–®ä¸€æ¬Šå¨ã€‘ä½©æˆ´ä¸€åªå…·å‚™ä»½é‡çš„å°ç« æˆ’æŒ‡ï¼Œè±¡å¾µå”¯ä¸€çš„ç›®æ¨™èˆ‡ä¸å®¹å‹•æ–çš„æ„å¿—ã€‚"}
    },
    2:  {
        "name": "æœˆäº® (Lunar)", 
        "F": {"structure": "é›™çŸ³ / å°ç¨±", "style": "ã€æˆé›™æˆå°ã€‘æˆ´ä¸Šã€Œä¸€å°ã€è€³ç’°ï¼Œæˆ–è€…å·¦å³æ‰‹å„æˆ´ä¸€å€‹æˆ’æŒ‡ã€‚é€™èƒ½å¹«å¦³å¹³è¡¡å…§åœ¨çš„ç³¾çµï¼Œåœ¨åšé¸æ“‡æ™‚æ›´æœæ–·ã€‚"},
        "M": {"structure": "ç•°æè³ªæ‹¼æ¥", "style": "ã€äºŒå…ƒå¹³è¡¡ã€‘é¸æ“‡é‡‘éŠ€æ‹¼æ¥æˆ–äº®éœ§é¢é›™è‰²è¨­è¨ˆçš„é£¾å“ï¼Œæé†’è‡ªå·±åœ¨æŒ‘æˆ°èˆ‡ç©©å®šä¹‹é–“æ‰¾åˆ°å¹³è¡¡é»ã€‚"}
    },
    3:  {
        "name": "é›»åŠ› (Electric)", 
        "F": {"structure": "ä¸‰è§’å½¢ / å‚å¢œ", "style": "ã€å‹•æ…‹é€£çµã€‘é¸æœƒã€Œæ™ƒå‹•ã€çš„è€³ç’°æˆ–æœ‰å‚å¢œæ„Ÿçš„æ‰‹éŠã€‚è®“é£¾å“éš¨è‘—å¦³çš„å‹•ä½œæ“ºå‹•ï¼Œèƒ½å¹«å¦³æ‹›ä¾†å¥½äººç·£å’Œæ´»çµ¡çš„èƒ½é‡ã€‚"},
        "M": {"structure": "åŠŸèƒ½æ€§é£¾å“", "style": "ã€é€£çµå•Ÿå‹•ã€‘é¸æ“‡å…·æœ‰ç¨ç‰¹æ‰£ç’°è¨­è¨ˆçš„æ‰‹ç’°ï¼Œæˆ–èˆ‡ç§‘æŠ€é…ä»¶çµåˆï¼Œè±¡å¾µéš¨æ™‚æº–å‚™å¥½å•Ÿå‹•èˆ‡é€£çµã€‚"}
    },
    4:  {
        "name": "è‡ªæˆ‘å­˜åœ¨ (Self-Existing)", 
        "F": {"structure": "æ–¹å½¢ / çµæ§‹", "style": "ã€æ–¹æ­£çµæ§‹ã€‘é©åˆã€Œæ–¹å½¢ã€æˆ–ç·šæ¢ç¡¬æœ—çš„è¨­è¨ˆã€‚é€™èƒ½å¸¶çµ¦å¦³å®‰å…¨æ„Ÿï¼Œå¹«å¦³åœ¨è®Šå‹•çš„ç’°å¢ƒä¸­ç©©ä½é™£è…³ï¼Œå»ºç«‹ç§©åºã€‚"},
        "M": {"structure": "æ–¹æˆ’ / å¹¾ä½•", "style": "ã€å®šç¾©å½¢å¼ã€‘ä½©æˆ´ç·šæ¢å‰›ç¡¬çš„æ–¹å½¢æˆ’æŒ‡æˆ–ç«‹æ–¹é«”å¢œé£¾ï¼Œè±¡å¾µä½ å°ç”Ÿæ´»çš„å®šç¾©èˆ‡å»ºç«‹çš„ç©©å›ºå½¢å¼ã€‚"}
    },
    5:  {
        "name": "è¶…é » (Overtone)", 
        "F": {"structure": "äº”è§’æ˜Ÿ / å…‰åœˆ", "style": "ã€æ ¸å¿ƒè‡ªä¿¡ã€‘æˆ´ä¸€å€‹ç¨å¾®ã€Œå¤§ä¸€é»ã€é¡¯çœ¼ä¸€é»ã€çš„ä¸»æˆ’æŒ‡æˆ–é …éŠã€‚åˆ¥ä½èª¿ï¼Œä»Šå¤©è¦å±•ç¾å¦³çš„æ°£å ´ï¼Œè®“å¤§å®¶çœ‹è¦‹å¦³ï¼"},
        "M": {"structure": "éœ¸æ°£ä¸»æˆ’", "style": "ã€å½°é¡¯åŠ›é‡ã€‘é¸æ“‡é«”ç©è¼ƒå¤§ã€å­˜åœ¨æ„Ÿå¼·çƒˆçš„ä¸»æˆ’æŒ‡ï¼Œå±•ç¾ä½ çš„é ˜å°åŠ›èˆ‡æ ¸å¿ƒå½±éŸ¿åŠ›ã€‚"}
    },
    6:  {
        "name": "éŸ»å¾‹ (Rhythmic)", 
        "F": {"structure": "å…­é‚Šå½¢ / å¹³è¡¡", "style": "ã€èˆ’é©æµå‹•ã€‘é¸æ“‡æˆ´èµ·ä¾†ã€Œæœ€èˆ’æœã€åœ“æ½¤ã€çš„é£¾å“ã€‚ä¾‹å¦‚æ»¾ç ç³»åˆ—ï¼Œè®“å¦³åœ¨å¿™ç¢Œä¸­ä¹Ÿèƒ½ä¿æŒå„ªé›…çš„ç¯€å¥ï¼Œä¸æ…Œä¸å¿™ã€‚"},
        "M": {"structure": "éŠæ¢ / ç¯€å¥", "style": "ã€çµ„ç¹”å¹³è¡¡ã€‘ä½©æˆ´è¦å¾‹æ’åˆ—çš„å¤å·´éŠæˆ–ç’°ç’°ç›¸æ‰£çš„æ‰‹éŠï¼Œè±¡å¾µç”Ÿæ´»ç¯€å¥çš„çµ„ç¹”èˆ‡æµæš¢ã€‚"}
    },
    7:  {
        "name": "å…±æŒ¯ (Resonant)", 
        "F": {"structure": "Yå­—éŠ / ä¸­è»¸", "style": "ã€ç›´è¦ºæ„Ÿæ‡‰ã€‘ä»Šå¤©å‡ºé–€å‰ï¼Œé–‰ä¸Šçœ¼æ‘¸æ‘¸é£¾å“ç›’ï¼Œ**ç›´è¦º**æ‹¿åˆ°å“ªä¸€å€‹å°±æˆ´å“ªä¸€å€‹ã€‚é‚£å°±æ˜¯å®‡å®™ä»Šå¤©è¦çµ¦å¦³çš„è¨Šæ¯ã€‚"},
        "M": {"structure": "ç°¡ç´„å¢œé£¾", "style": "ã€é€šé“èª¿é »ã€‘ä½©æˆ´å‚ç›´ç·šæ¢çš„å¢œé£¾æˆ–é•·æ–¹ç‰Œï¼Œè±¡å¾µä½ æˆç‚ºæ¥æ”¶éˆæ„Ÿèˆ‡è³‡è¨Šçš„é€šé“ã€‚"}
    },
    8:  {
        "name": "éŠ€æ²³ (Galactic)", 
        "F": {"structure": "ç„¡é™ç¬¦è™Ÿ / äº¤ç¹”", "style": "ã€å’Œè«§å‘¼æ‡‰ã€‘è©¦è©¦çœ‹ã€Œæˆå¥—æ­é…ã€ï¼Œä¾‹å¦‚é …éŠé…è€³ç’°ã€‚é€™ç¨®æ•´é«”æ„Ÿèƒ½å¹«å¦³æ•´åˆä¿¡å¿µï¼Œè®“å¦³èªªå‡ºä¾†çš„è©±æ›´æœ‰ä»½é‡ã€‚"},
        "M": {"structure": "ç·¨ç¹”ç´‹ç†", "style": "ã€ä¿¡å¿µæ•´åˆã€‘é¸æ“‡é‡‘å±¬ç·¨ç¹”ç´‹ç†çš„æˆ’æŒ‡æˆ–æ‰‹ç’°ï¼Œè±¡å¾µå¤–åœ¨è¡Œå‹•èˆ‡å…§åœ¨ä¿¡å¿µçš„å®Œç¾äº¤ç¹”ã€‚"}
    },
    9:  {
        "name": "å¤ªé™½ (Solar)", 
        "F": {"structure": "æµè˜‡ / å‹•æ…‹", "style": "ã€æ„åœ–é–ƒè€€ã€‘é¸æœ‰é‘²é‘½æˆ–æœƒã€Œé–ƒé–ƒç™¼å…‰ã€çš„æ¬¾å¼ã€‚è®“é‚£é“å…‰èŠ’éš¨è‘—å¦³çš„å‹•ä½œè„ˆå‹•ï¼ŒæŠŠå¦³çš„ç†±æƒ…å‚³éå‡ºå»ã€‚"},
        "M": {"structure": "æ”¾å°„ç‹€åœ–é¨°", "style": "ã€è¡Œå‹•è„ˆè¡ã€‘åˆ»æœ‰å¤ªé™½æ”¾å°„ç·šæ¢çš„é£¾å“ï¼Œè±¡å¾µä½ çš„æ„åœ–å¦‚å¤ªé™½èˆ¬å‘å¤–æ“´å±•ï¼ŒåŒ–ç‚ºå…·é«”è¡Œå‹•ã€‚"}
    },
    10: {
        "name": "è¡Œæ˜Ÿ (Planetary)", 
        "F": {"structure": "æ’é‘½ / å¯¦å¿ƒ", "style": "ã€å®Œç¾é¡¯åŒ–ã€‘é¸åšå·¥æœ€ç²¾ç´°ã€è³ªæ„Ÿæœ€å¥½çš„é‚£ä»¶é£¾å“ã€‚å®ƒè±¡å¾µè‘—ã€Œå®Œç¾ã€ï¼Œèƒ½å¹«å¦³æŠŠè…¦ä¸­çš„è¨ˆç•«ï¼Œæ¼‚äº®åœ°è½å¯¦åˆ°ç”Ÿæ´»ä¸­ã€‚"},
        "M": {"structure": "å¯¦å¿ƒå¯¬ç‰ˆ", "style": "ã€è½å¯¦æˆæœã€‘ä½©æˆ´å¯¦å¿ƒä¸”åšå¯¦çš„å¯¬ç‰ˆæˆ’æŒ‡æˆ–æ‰‹é²ï¼Œè±¡å¾µä½ å°‡è¨ˆç•«é¡¯åŒ–ç‚ºå…·é«”æˆæœçš„æ‰å¯¦èƒ½åŠ›ã€‚"}
    },
    11: {
        "name": "å…‰è­œ (Spectral)", 
        "F": {"structure": "å½©è™¹ / æ¼¸å±¤", "style": "ã€è‡ªç”±æ··æ­ã€‘ä»Šå¤©æ‰“ç ´è¦å‰‡ï¼é‡‘é…éŠ€ã€æˆ–è€…æ··æ­ä¸åŒç³»åˆ—éƒ½å¯ä»¥ã€‚é€™ç¨®è‡ªç”±æ„Ÿèƒ½å¹«å¦³é‡‹æ”¾å£“åŠ›ï¼Œæ‰¾å›æœ€çœŸå¯¦çš„è‡ªå·±ã€‚"},
        "M": {"structure": "ä¸è¦å‰‡ / ç ´å£", "style": "ã€é‡‹æ”¾è§£æ§‹ã€‘é¸æ“‡å¸¶æœ‰ä¸è¦å‰‡åˆ‡é¢æˆ–åšèˆŠè™•ç†çš„è¨­è¨ˆï¼Œè±¡å¾µæ‰“ç ´æ¡†æ¶ã€é‡‹æ”¾èˆŠæœ‰æ¨¡å¼çš„è‡ªç”±ã€‚"}
    },
    12: {
        "name": "æ°´æ™¶ (Crystal)", 
        "F": {"structure": "åœ“å½¢ / ä¸²ç ", "style": "ã€åˆ†äº«èˆ‡æ„›ã€‘é€™æ˜¯ä¸€ä»¶é©åˆè·Ÿå¥½æœ‹å‹æˆ–å¦ä¸€åŠæˆ´ã€Œå°éŠ/å°æˆ’ã€çš„æ—¥å­ã€‚é€éé£¾å“é€£çµå½¼æ­¤çš„å¿ƒï¼Œèƒ½é‡æœƒåŠ å€å–”ï¼"},
        "M": {"structure": "åœ“å¼§ / é€£çµ", "style": "ã€åœ˜é«”åˆä½œã€‘é¸æ“‡åœ“å¼§ç·šæ¢çš„æˆ’æŒ‡ï¼Œæˆ–è±¡å¾µé€£çµçš„ç¹©çµé‡‘å·¥è¨­è¨ˆï¼Œæé†’è‡ªå·±èå…¥åœ˜éšŠï¼Œè²¢ç»å·±åŠ›ã€‚"}
    },
    13: {
        "name": "å®‡å®™ (Cosmic)", 
        "F": {"structure": "èºæ—‹ / å…¨çŸ¥", "style": "ã€æ¥µç°¡ç•™ç™½ã€‘é¸è¨­è¨ˆæœ€ç°¡å–®ã€ç”šè‡³æœ‰é»ã€Œç•™ç™½ã€çš„æ¬¾å¼ã€‚è®“å¿ƒéˆæ”¾å€‹å‡ï¼Œäº«å—ç•¶ä¸‹ï¼ŒåŒ…å®¹ç”Ÿå‘½ç™¼ç”Ÿçš„ä¸€åˆ‡ã€‚"},
        "M": {"structure": "ç•™ç™½ / ç´ é¢", "style": "ã€è¶…è¶Šå­˜åœ¨ã€‘ä½©æˆ´æ¥µç°¡çš„ç´ é¢å¯¬æˆ’ï¼Œç„¡å¤šé¤˜é›•é£¾ï¼Œè±¡å¾µè¶…è¶Šä¸–ä¿—ç´›æ“¾ï¼Œå®‰ä½åœ¨ç•¶ä¸‹çš„å­˜åœ¨ã€‚"}
    }
}

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Page Config & CSS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
st.set_page_config(page_title="Tru-Mi Ã— Maya èƒ½é‡é¸å“", layout="wide", page_icon="ğŸ’")
st.markdown(
    """<style>
    .hero {padding:3rem 2rem; text-align:center; background: linear-gradient(135deg, #FFF5F7 0%, #E6EEF5 100%); border-radius: 15px; margin-bottom: 2rem;}
    .hero h1 {font-size:2.5rem; font-weight:700; color: #555; margin-bottom:0.5rem; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;}
    .hero p  {font-size:1.1rem; color: #777;}
    
    .footer {position:fixed; bottom:0; width:100%; background:#333; color:white; text-align:center; padding:1rem; z-index:999;}
    .footer a {color:#F8BBD0; text-decoration:none; margin:0 0.5rem;}
    
    div[data-testid="stContainer"] {
        background-color: #ffffff;
        border-radius: 12px;
        padding: 20px;
        box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        border: 1px solid #f5f5f5;
    }
    
    .btn-trumi {
        display: inline-block;
        padding: 10px 20px;
        background-color: #D4AF37;
        color: white !important;
        text-decoration: none;
        border-radius: 5px;
        font-weight: bold;
        margin-top: 10px;
        text-align: center;
        width: 100%;
        transition: all 0.3s ease;
    }
    .btn-trumi:hover {
        background-color: #B59025;
        transform: translateY(-2px);
    }
    
    .ritual-box {
        background-color: #fafafa;
        padding: 20px;
        border-left: 5px solid #D4AF37;
        margin-top: 20px;
        font-size: 0.95rem;
    }
    
    .tag-box {
        display: inline-block;
        padding: 5px 10px;
        background-color: #fff3e0;
        color: #e65100;
        border-radius: 15px;
        font-size: 0.9rem;
        font-weight: bold;
        margin-bottom: 10px;
    }
    </style>""",
    unsafe_allow_html=True,
)

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Hero Section â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
st.markdown(
    """
    <section class="hero">
      <h1>Tru-Mi Ã— Maya èƒ½é‡é¸å“</h1>
      <p>æ¢ç´¢å¦³/ä½ çš„éˆé­‚å°è¨˜ï¼Œé‡è¦‹å°ˆå±¬æ–¼ä½ çš„ Tru-Mi æ•…äº‹ç å¯¶</p>
    </section>
    """,
    unsafe_allow_html=True,
)

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Load Data â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
try:
    kin_start   = pd.read_csv(os.path.join(DATA_DIR, "kin_start_year.csv"), index_col="å¹´ä»½")["èµ·å§‹KIN"].to_dict()
    month_accum = pd.read_csv(os.path.join(DATA_DIR, "month_day_accum.csv"),   index_col="æœˆä»½")["ç´¯ç©å¤©æ•¸"].to_dict()
    kin_basic   = pd.read_csv(os.path.join(DATA_DIR, "kin_basic_info.csv"))
except Exception as e:
    st.error(f"âŒ è³‡æ–™è¼‰å…¥å¤±æ•—ï¼š{e}")
    st.stop()

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Sidebar Input â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
st.sidebar.header("ğŸ“… è¼¸å…¥è³‡è¨Šï¼Œå°‹æ‰¾å‘½å®šé£¾å“")
# æ€§åˆ¥é¸æ“‡
gender_input = st.sidebar.radio("å¿ƒç†æ€§åˆ¥ (Psychological Gender)", ["å¥³æ€§ (Female)", "ç”·æ€§ (Male)"])
gender_key = "M" if "ç”·" in gender_input else "F"

year = st.sidebar.selectbox("å‡ºç”Ÿå¹´ä»½ (è¥¿å…ƒ)", sorted(kin_start.keys()), index=sorted(kin_start.keys()).index(1990))
month = st.sidebar.selectbox("å‡ºç”Ÿæœˆä»½", list(range(1,13)), index=0)
max_day = calendar.monthrange(year, month)[1]
day = st.sidebar.slider("å‡ºç”Ÿæ—¥æœŸ", 1, max_day, 1)

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ KIN & Tone Calculation â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
start_kin = kin_start.get(year)
if start_kin is None:
    st.sidebar.error("âš ï¸ æ­¤å¹´ä»½ç„¡èµ·å§‹ KIN")
    st.stop()

raw = start_kin + month_accum.get(month,0) + day
mod = raw % 260
kin = 260 if mod==0 else mod

tone_number = kin % 13
if tone_number == 0:
    tone_number = 13

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ é¡¯ç¤ºåŸºæœ¬è³‡è¨Š â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
subset = kin_basic[kin_basic["KIN"]==kin]
if subset.empty:
    st.error(f"â“ æ‰¾ä¸åˆ° KIN {kin} è³‡æ–™")
    st.stop()
info = subset.iloc[0]
totem = info["åœ–é¨°"]

# Get Mapped Data
general_rec  = totem_general.get(totem, {})
trumi_data   = totem_trumi.get(totem, {})
trumi_rec    = trumi_data.get(gender_key, {})   # Get F or M based on selection

tone_data    = tone_advice.get(tone_number, {})
tone_rec     = tone_data.get(gender_key, {})    # Get F or M
tone_name    = tone_data.get("name", str(tone_number))

st.markdown(f"### ğŸ”® ä½ çš„éˆé­‚å°è¨˜ï¼š{kin} {totem} (èª¿æ€§ {tone_number})")

col_img, col_info = st.columns([1, 4])
with col_img:
    img_file = os.path.join(IMG_DIR, f"{totem}.png")
    if os.path.exists(img_file):
        st.image(Image.open(img_file), use_container_width=True)

with col_info:
    if general_rec:
        # é¡¯ç¤ºäººç”Ÿé¢å‘ Tag
        st.markdown(f'<div class="tag-box">{general_rec.get("focus", "å…¨æ–¹ä½")}</div>', unsafe_allow_html=True)
        st.success(f"**æ ¸å¿ƒèƒ½é‡ï¼š{general_rec['vibe']}**")
        st.write(f"æ¨è–¦é‡‘å±¬ï¼š**{general_rec['metal']}**")
    else:
        st.warning("ç›®å‰å°šç„¡æ­¤åœ–é¨°å°æ‡‰è³‡æ–™")

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ é¸å“é¡§å•ä¸»å€å¡Š (æ•´åˆç‰ˆ) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
st.divider()

col1, col2 = st.columns(2)

# å·¦æ¬„ï¼šéˆé­‚æè³ªå»ºè­° (é€šç”¨å»ºè­° - Why you need it)
with col1:
    st.markdown("#### ğŸ’ éˆé­‚æè³ªå»ºè­° (Soul Material)")
    st.caption("ç”±ä½ çš„å¤ªé™½åœ–é¨°æ±ºå®š")
    
    if general_rec:
        wit
